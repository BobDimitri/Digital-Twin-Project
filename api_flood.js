// ═══════════════════════════════════════════════════════════════════
//  API Flood Risk Module — Dublin Antecedent Precipitation Index
//  Formula: APIt = k·APIt-1 + Pt   (k = 0.9)
//  Flood Probability: P = 1 / (1 + exp(-(API - 80) / 12))
//  Historical data: 2021-01-01 → 2026-02-21 (from OPW / Open-Meteo)
// ═══════════════════════════════════════════════════════════════════
(function () {
    'use strict';

    const K     = 0.9;                   // decay coefficient
    const DUBLIN = [53.3498, -6.2603];   // lat, lng
    const API_THRESHOLD_LOW    = 50;     // yellow watch
    const API_THRESHOLD_MEDIUM = 70;     // orange warning
    const API_THRESHOLD_HIGH   = 90;     // red alert

    // ── Historical data (2021-01-01 to 2026-02-21) ──────────────────
    // Format: [date, rain_mm, API, flood_event]
    const HIST_DATA = [["2021-01-01",0.0,0.0,false],["2021-01-02",0.0,0.0,false],["2021-01-03",0.0,0.0,false],["2021-01-04",14.153,14.153,false],["2021-01-05",0.0,12.738,false],["2021-01-06",0.0,11.464,false],["2021-01-07",1.073,11.39,false],["2021-01-08",2.991,13.242,false],["2021-01-09",0.0,11.917,false],["2021-01-10",2.83,13.555,false],["2021-01-11",3.646,15.846,false],["2021-01-12",0.0,14.261,false],["2021-01-13",0.0,12.835,false],["2021-01-14",0.0,11.552,false],["2021-01-15",0.0,10.397,false],["2021-01-16",9.804,19.161,false],["2021-01-17",1.49,18.735,false],["2021-01-18",0.0,16.861,false],["2021-01-19",1.664,16.839,false],["2021-01-20",0.0,15.155,false],["2021-01-21",0.0,13.64,false],["2021-01-22",0.981,13.257,false],["2021-01-23",3.791,15.722,false],["2021-01-24",0.0,14.15,false],["2021-01-25",0.0,12.735,false],["2021-01-26",0.0,11.462,false],["2021-01-27",0.0,10.315,false],["2021-01-28",0.0,9.284,false],["2021-01-29",1.23,9.585,false],["2021-01-30",0.0,8.627,false],["2021-01-31",0.138,7.902,false],["2021-02-01",3.198,10.31,false],["2021-02-02",0.0,9.279,false],["2021-02-03",0.0,8.351,false],["2021-02-04",0.0,7.516,false],["2021-02-05",0.219,6.983,false],["2021-02-06",10.474,16.759,false],["2021-02-07",0.0,15.083,false],["2021-02-08",3.902,17.476,false],["2021-02-09",2.175,17.903,false],["2021-02-10",4.264,20.377,false],["2021-02-11",0.699,19.039,false],["2021-02-12",3.65,20.785,false],["2021-02-13",0.0,18.706,false],["2021-02-14",0.0,16.836,false],["2021-02-15",0.0,15.152,false],["2021-02-16",3.081,16.718,false],["2021-02-17",0.0,15.046,false],["2021-02-18",0.0,13.541,false],["2021-02-19",5.854,18.041,false],["2021-02-20",9.175,25.412,false],["2021-02-21",6.128,28.999,false],["2021-02-22",0.0,26.099,false],["2021-02-23",5.187,28.676,false],["2021-02-24",0.0,25.808,false],["2021-02-25",0.0,23.227,false],["2021-02-26",0.0,20.904,false],["2021-02-27",0.0,18.814,false],["2021-02-28",0.0,16.933,false],["2021-03-01",0.0,15.239,false],["2021-03-02",0.0,13.715,false],["2021-03-03",4.0,16.344,false],["2021-03-04",0.049,14.758,false],["2021-03-05",0.0,13.283,false],["2021-03-06",5.788,17.743,false],["2021-03-07",3.004,18.973,false],["2021-03-08",0.576,17.652,false],["2021-03-09",0.0,15.886,false],["2021-03-10",0.0,14.298,false],["2021-03-11",0.0,12.868,false],["2021-03-12",0.0,11.581,false],["2021-03-13",0.0,10.423,false],["2021-03-14",0.0,9.381,false],["2021-03-15",3.7,12.143,false],["2021-03-16",0.545,11.473,false],["2021-03-17",1.679,12.005,false],["2021-03-18",1.822,12.626,false],["2021-03-19",0.0,11.363,false],["2021-03-20",0.0,10.227,false],["2021-03-21",0.0,9.204,false],["2021-03-22",0.0,8.284,false],["2021-03-23",0.0,7.455,false],["2021-03-24",0.0,6.71,false],["2021-03-25",0.559,6.598,false],["2021-03-26",0.0,5.938,false],["2021-03-27",0.0,5.345,false],["2021-03-28",19.168,23.978,false],["2021-03-29",0.461,22.041,false],["2021-03-30",0.0,19.837,false],["2021-03-31",4.261,22.115,false],["2021-04-01",0.0,19.903,false],["2021-04-02",0.0,17.913,false],["2021-04-03",0.0,16.122,false],["2021-04-04",0.0,14.509,false],["2021-04-05",0.0,13.058,false],["2021-04-06",0.597,12.349,false],["2021-04-07",0.0,11.114,false],["2021-04-08",12.498,22.501,false],["2021-04-09",0.0,20.251,false],["2021-04-10",2.098,20.323,false],["2021-04-11",1.4,19.691,false],["2021-04-12",2.381,20.103,false],["2021-04-13",0.543,18.635,false],["2021-04-14",0.0,16.772,false],["2021-04-15",5.912,21.007,false],["2021-04-16",0.831,19.737,false],["2021-04-17",0.317,18.08,false],["2021-04-18",1.714,17.986,false],["2021-04-19",7.835,24.023,false],["2021-04-20",0.0,21.621,false],["2021-04-21",0.0,19.459,false],["2021-04-22",0.0,17.513,false],["2021-04-23",0.071,15.833,false],["2021-04-24",0.401,14.65,false],["2021-04-25",0.0,13.185,false],["2021-04-26",0.0,11.867,false],["2021-04-27",0.0,10.68,false],["2021-04-28",0.0,9.612,false],["2021-04-29",0.0,8.651,false],["2021-04-30",0.393,8.179,false],["2021-05-01",0.0,7.361,false],["2021-05-02",7.345,13.97,false],["2021-05-03",0.0,12.573,false],["2021-05-04",0.0,11.315,false],["2021-05-05",0.0,10.184,false],["2021-05-06",0.0,9.165,false],["2021-05-07",0.0,8.249,false],["2021-05-08",0.0,7.424,false],["2021-05-09",0.0,6.682,false],["2021-05-10",0.0,6.013,false],["2021-05-11",0.0,5.412,false],["2021-05-12",0.0,4.871,false],["2021-05-13",1.163,5.547,false],["2021-05-14",0.0,4.992,false],["2021-05-15",0.0,4.493,false],["2021-05-16",0.0,4.044,false],["2021-05-17",0.615,4.254,false],["2021-05-18",2.942,6.771,false],["2021-05-19",2.327,8.421,false],["2021-05-20",0.477,8.057,false],["2021-05-21",0.0,7.251,false],["2021-05-22",0.783,7.309,false],["2021-05-23",0.0,6.578,false],["2021-05-24",0.0,5.92,false],["2021-05-25",0.926,6.254,false],["2021-05-26",0.0,5.629,false],["2021-05-27",1.324,6.39,false],["2021-05-28",6.561,12.312,false],["2021-05-29",0.0,11.081,false],["2021-05-30",0.0,9.973,false],["2021-05-31",0.0,8.976,false],["2021-06-01",0.0,8.078,false],["2021-06-02",1.181,8.451,false],["2021-06-03",1.049,8.655,false],["2021-06-04",0.0,7.789,false],["2021-06-05",0.0,7.011,false],["2021-06-06",0.186,6.496,false],["2021-06-07",0.0,5.846,false],["2021-06-08",0.0,5.262,false],["2021-06-09",0.0,4.735,false],["2021-06-10",0.0,4.262,false],["2021-06-11",0.0,3.836,false],["2021-06-12",0.0,3.452,false],["2021-06-13",1.147,4.254,false],["2021-06-14",11.358,15.186,false],["2021-06-15",0.362,14.029,false],["2021-06-16",0.0,12.626,false],["2021-06-17",0.0,11.364,false],["2021-06-18",2.938,13.165,false],["2021-06-19",3.008,14.857,false],["2021-06-20",0.0,13.371,false],["2021-06-21",0.0,12.034,false],["2021-06-22",0.0,10.831,false],["2021-06-23",0.0,9.748,false],["2021-06-24",1.61,10.383,false],["2021-06-25",1.003,10.348,false],["2021-06-26",0.0,9.313,false],["2021-06-27",0.0,8.382,false],["2021-06-28",0.0,7.543,false],["2021-06-29",1.998,8.787,false],["2021-06-30",5.155,13.063,false],["2021-07-01",6.661,18.418,false],["2021-07-02",0.0,16.576,false],["2021-07-03",0.0,14.918,false],["2021-07-04",0.0,13.426,false],["2021-07-05",1.318,13.402,false],["2021-07-06",0.0,12.062,false],["2021-07-07",8.607,19.462,false],["2021-07-08",0.349,17.865,false],["2021-07-09",0.0,16.078,false],["2021-07-10",0.0,14.47,false],["2021-07-11",5.028,18.052,false],["2021-07-12",10.152,26.399,false],["2021-07-13",0.886,24.645,false],["2021-07-14",0.0,22.181,false],["2021-07-15",3.603,23.566,false],["2021-07-16",0.325,21.535,false],["2021-07-17",3.859,23.24,false],["2021-07-18",0.0,20.916,false],["2021-07-19",0.0,18.824,false],["2021-07-20",0.0,16.942,false],["2021-07-21",2.153,17.401,false],["2021-07-22",0.0,15.661,false],["2021-07-23",1.638,15.732,false],["2021-07-24",2.918,17.077,false],["2021-07-25",0.0,15.369,false],["2021-07-26",0.0,13.833,false],["2021-07-27",7.994,20.444,false],["2021-07-28",0.0,18.399,false],["2021-07-29",0.0,16.559,false],["2021-07-30",3.054,17.958,false],["2021-07-31",2.585,18.747,false],["2021-08-01",0.0,16.872,false],["2021-08-02",1.113,16.297,false],["2021-08-03",0.0,14.668,false],["2021-08-04",1.291,14.491,false],["2021-08-05",0.373,13.415,false],["2021-08-06",1.224,13.297,false],["2021-08-07",0.0,11.967,false],["2021-08-08",0.0,10.771,false],["2021-08-09",0.0,9.694,false],["2021-08-10",0.0,8.724,false],["2021-08-11",0.0,7.852,false],["2021-08-12",1.44,8.507,false],["2021-08-13",2.256,9.912,false],["2021-08-14",6.195,15.116,false],["2021-08-15",0.366,13.971,false],["2021-08-16",0.0,12.574,false],["2021-08-17",0.0,11.316,false],["2021-08-18",5.146,15.33,false],["2021-08-19",0.0,13.797,false],["2021-08-20",0.0,12.418,false],["2021-08-21",4.003,15.178,false],["2021-08-22",0.0,13.66,false],["2021-08-23",4.225,16.519,false],["2021-08-24",0.0,14.867,false],["2021-08-25",0.0,13.381,false],["2021-08-26",0.0,12.043,false],["2021-08-27",0.0,10.838,false],["2021-08-28",0.0,9.755,false],["2021-08-29",0.0,8.779,false],["2021-08-30",6.461,14.362,false],["2021-08-31",0.0,12.926,false],["2021-09-01",2.221,13.854,false],["2021-09-02",0.0,12.469,false],["2021-09-03",0.0,11.222,false],["2021-09-04",13.653,23.753,false],["2021-09-05",1.992,23.369,false],["2021-09-06",5.964,26.996,false],["2021-09-07",2.012,26.309,false],["2021-09-08",5.822,29.5,false],["2021-09-09",0.913,27.463,false],["2021-09-10",1.853,26.569,false],["2021-09-11",4.595,28.507,false],["2021-09-12",3.55,29.207,false],["2021-09-13",0.0,26.286,false],["2021-09-14",10.95,34.608,false],["2021-09-15",0.0,31.147,false],["2021-09-16",7.912,35.944,false],["2021-09-17",0.0,32.35,false],["2021-09-18",0.0,29.115,false],["2021-09-19",0.958,27.161,false],["2021-09-20",0.0,24.445,false],["2021-09-21",1.651,23.651,false],["2021-09-22",3.049,24.335,false],["2021-09-23",0.0,21.901,false],["2021-09-24",0.0,19.711,false],["2021-09-25",0.697,18.437,false],["2021-09-26",0.0,16.593,false],["2021-09-27",6.981,21.915,false],["2021-09-28",6.783,26.506,false],["2021-09-29",9.852,33.707,false],["2021-09-30",0.0,30.336,false],["2021-10-01",14.122,41.424,false],["2021-10-02",2.306,39.588,false],["2021-10-03",0.0,35.629,false],["2021-10-04",0.0,32.066,false],["2021-10-05",1.349,30.208,false],["2021-10-06",0.0,27.188,false],["2021-10-07",4.325,28.794,false],["2021-10-08",4.746,30.661,false],["2021-10-09",0.0,27.595,false],["2021-10-10",6.843,31.678,false],["2021-10-11",0.0,28.51,false],["2021-10-12",0.0,25.659,false],["2021-10-13",6.843,29.937,false],["2021-10-14",0.698,27.641,false],["2021-10-15",2.7,27.577,false],["2021-10-16",1.712,26.532,false],["2021-10-17",0.0,23.879,false],["2021-10-18",0.0,21.491,false],["2021-10-19",0.0,19.342,false],["2021-10-20",0.0,17.408,false],["2021-10-21",15.0,30.667,false],["2021-10-22",20.0,47.6,false],["2021-10-23",10.0,52.84,false],["2021-10-24",38.0,85.556,true],["2021-10-25",0.0,77.001,true],["2021-10-26",0.0,69.301,true],["2021-10-27",0.0,62.37,false],["2021-10-28",0.0,56.133,false],["2021-10-29",9.31,59.83,false],["2021-10-30",0.0,53.847,false],["2021-10-31",7.44,55.902,false],["2021-11-01",0.0,50.312,false],["2021-11-02",0.0,45.281,false],["2021-11-03",0.0,40.752,false],["2021-11-04",0.0,36.677,false],["2021-11-05",8.915,41.924,false],["2021-11-06",0.0,37.732,false],["2021-11-07",0.0,33.959,false],["2021-11-08",2.513,33.076,false],["2021-11-09",1.248,31.016,false],["2021-11-10",2.099,30.013,false],["2021-11-11",0.0,27.012,false],["2021-11-12",0.0,24.311,false],["2021-11-13",0.82,22.7,false],["2021-11-14",0.0,20.43,false],["2021-11-15",0.0,18.387,false],["2021-11-16",0.0,16.548,false],["2021-11-17",0.0,14.893,false],["2021-11-18",0.0,13.404,false],["2021-11-19",5.287,17.351,false],["2021-11-20",1.731,17.346,false],["2021-11-21",0.0,15.612,false],["2021-11-22",6.918,20.969,false],["2021-11-23",0.0,18.872,false],["2021-11-24",3.344,20.329,false],["2021-11-25",0.0,18.296,false],["2021-11-26",0.0,16.466,false],["2021-11-27",0.0,14.82,false],["2021-11-28",4.35,17.688,false],["2021-11-29",1.117,17.036,false],["2021-11-30",0.0,15.332,false],["2021-12-01",0.0,13.799,false],["2021-12-02",0.325,12.744,false],["2021-12-03",0.0,11.47,false],["2021-12-04",2.284,12.606,false],["2021-12-05",2.303,13.649,false],["2021-12-06",0.0,12.284,false],["2021-12-07",0.0,11.056,false],["2021-12-08",2.362,12.312,false],["2021-12-09",0.107,11.188,false],["2021-12-10",0.0,10.069,false],["2021-12-11",0.0,9.062,false],["2021-12-12",0.0,8.156,false],["2021-12-13",0.389,7.73,false],["2021-12-14",5.078,12.034,false],["2021-12-15",0.0,10.831,false],["2021-12-16",8.953,18.701,false],["2021-12-17",2.49,19.321,false],["2021-12-18",0.0,17.389,false],["2021-12-19",0.0,15.65,false],["2021-12-20",0.0,14.085,false],["2021-12-21",0.0,12.676,false],["2021-12-22",0.0,11.409,false],["2021-12-23",0.738,11.005,false],["2021-12-24",0.0,9.905,false],["2021-12-25",1.239,10.153,false],["2021-12-26",0.0,9.138,false],["2021-12-27",0.0,8.224,false],["2021-12-28",10.532,17.934,false],["2021-12-29",0.927,17.067,false],["2021-12-30",4.702,20.063,false],["2021-12-31",5.019,23.076,false],["2022-01-01",1.038,21.806,false],["2022-01-02",1.066,20.692,false],["2022-01-03",0.0,18.623,false],["2022-01-04",18.71,35.47,false],["2022-01-05",0.0,31.923,false],["2022-01-06",4.617,33.347,false],["2022-01-07",0.0,30.013,false],["2022-01-08",0.0,27.011,false],["2022-01-09",0.76,25.07,false],["2022-01-10",0.0,22.563,false],["2022-01-11",2.456,22.763,false],["2022-01-12",14.851,35.337,false],["2022-01-13",1.425,33.228,false],["2022-01-14",0.0,29.905,false],["2022-01-15",1.16,28.075,false],["2022-01-16",0.0,25.267,false],["2022-01-17",2.843,25.583,false],["2022-01-18",0.0,23.025,false],["2022-01-19",0.0,20.723,false],["2022-01-20",0.0,18.65,false],["2022-01-21",11.205,27.99,false],["2022-01-22",0.0,25.191,false],["2022-01-23",0.128,22.8,false],["2022-01-24",0.0,20.52,false],["2022-01-25",1.469,19.937,false],["2022-01-26",0.0,17.944,false],["2022-01-27",0.0,16.149,false],["2022-01-28",0.0,14.534,false],["2022-01-29",0.0,13.081,false],["2022-01-30",0.0,11.773,false],["2022-01-31",4.8,15.396,false],["2022-02-01",10.433,24.289,false],["2022-02-02",0.0,21.86,false],["2022-02-03",2.955,22.629,false],["2022-02-04",0.559,20.925,false],["2022-02-05",0.0,18.833,false],["2022-02-06",14.449,31.398,false],["2022-02-07",0.0,28.258,false],["2022-02-08",9.252,34.684,false],["2022-02-09",0.0,31.216,false],["2022-02-10",0.0,28.094,false],["2022-02-11",0.0,25.285,false],["2022-02-12",0.0,22.756,false],["2022-02-13",0.0,20.481,false],["2022-02-14",2.309,20.742,false],["2022-02-15",0.0,18.668,false],["2022-02-16",6.814,23.615,false],["2022-02-17",0.933,22.187,false],["2022-02-18",0.0,19.968,false],["2022-02-19",4.014,21.985,false],["2022-02-20",0.0,19.786,false],["2022-02-21",0.0,17.808,false],["2022-02-22",1.736,17.763,false],["2022-02-23",0.0,15.986,false],["2022-02-24",0.0,14.388,false],["2022-02-25",0.0,12.949,false],["2022-02-26",0.0,11.654,false],["2022-02-27",0.0,10.489,false],["2022-02-28",2.51,11.95,false],["2022-03-01",3.122,13.877,false],["2022-03-02",3.629,16.119,false],["2022-03-03",0.0,14.507,false],["2022-03-04",0.0,13.056,false],["2022-03-05",0.0,11.751,false],["2022-03-06",5.699,16.275,false],["2022-03-07",0.0,14.647,false],["2022-03-08",0.0,13.182,false],["2022-03-09",0.323,12.187,false],["2022-03-10",2.238,13.206,false],["2022-03-11",8.095,19.981,false],["2022-03-12",2.067,20.05,false],["2022-03-13",0.546,18.591,false],["2022-03-14",0.0,16.732,false],["2022-03-15",0.0,15.059,false],["2022-03-16",8.776,22.329,false],["2022-03-17",0.0,20.096,false],["2022-03-18",0.109,18.195,false],["2022-03-19",0.0,16.376,false],["2022-03-20",0.0,14.738,false],["2022-03-21",3.288,16.552,false],["2022-03-22",0.0,14.897,false],["2022-03-23",0.0,13.407,false],["2022-03-24",0.0,12.066,false],["2022-03-25",1.003,11.862,false],["2022-03-26",0.0,10.676,false],["2022-03-27",6.576,16.185,false],["2022-03-28",0.0,14.566,false],["2022-03-29",0.0,13.11,false],["2022-03-30",8.693,20.492,false],["2022-03-31",2.245,20.687,false],["2022-04-01",0.308,18.926,false],["2022-04-02",0.0,17.033,false],["2022-04-03",0.0,15.33,false],["2022-04-04",0.0,13.797,false],["2022-04-05",0.68,13.098,false],["2022-04-06",0.0,11.788,false],["2022-04-07",0.0,10.609,false],["2022-04-08",0.0,9.548,false],["2022-04-09",0.0,8.593,false],["2022-04-10",0.0,7.734,false],["2022-04-11",2.736,9.697,false],["2022-04-12",11.693,20.42,false],["2022-04-13",2.464,20.842,false],["2022-04-14",0.0,18.758,false],["2022-04-15",1.464,18.346,false],["2022-04-16",0.154,16.666,false],["2022-04-17",0.0,14.999,false],["2022-04-18",0.0,13.499,false],["2022-04-19",0.0,12.149,false],["2022-04-20",0.0,10.935,false],["2022-04-21",0.0,9.841,false],["2022-04-22",0.559,9.416,false],["2022-04-23",1.58,10.054,false],["2022-04-24",1.579,10.628,false],["2022-04-25",1.117,10.682,false],["2022-04-26",0.0,9.613,false],["2022-04-27",1.373,10.025,false],["2022-04-28",4.777,13.8,false],["2022-04-29",3.097,15.516,false],["2022-04-30",0.0,13.965,false],["2022-05-01",0.0,12.568,false],["2022-05-02",0.0,11.311,false],["2022-05-03",0.0,10.18,false],["2022-05-04",0.0,9.162,false],["2022-05-05",0.0,8.246,false],["2022-05-06",0.0,7.421,false],["2022-05-07",0.161,6.84,false],["2022-05-08",0.0,6.156,false],["2022-05-09",4.313,9.853,false],["2022-05-10",0.0,8.868,false],["2022-05-11",0.0,7.981,false],["2022-05-12",11.897,19.08,false],["2022-05-13",0.0,17.172,false],["2022-05-14",0.883,16.339,false],["2022-05-15",0.0,14.705,false],["2022-05-16",0.791,14.025,false],["2022-05-17",6.81,19.433,false],["2022-05-18",0.0,17.49,false],["2022-05-19",0.0,15.741,false],["2022-05-20",0.277,14.444,false],["2022-05-21",0.0,13.0,false],["2022-05-22",2.629,14.329,false],["2022-05-23",0.0,12.896,false],["2022-05-24",0.0,11.606,false],["2022-05-25",0.0,10.446,false],["2022-05-26",11.713,21.114,false],["2022-05-27",0.63,19.633,false],["2022-05-28",0.0,17.67,false],["2022-05-29",0.0,15.903,false],["2022-05-30",0.0,14.312,false],["2022-05-31",1.37,14.251,false],["2022-06-01",0.0,12.826,false],["2022-06-02",0.92,12.463,false],["2022-06-03",0.0,11.217,false],["2022-06-04",0.622,10.717,false],["2022-06-05",0.0,9.645,false],["2022-06-06",0.0,8.681,false],["2022-06-07",0.0,7.813,false],["2022-06-08",0.0,7.032,false],["2022-06-09",0.293,6.622,false],["2022-06-10",12.775,18.735,false],["2022-06-11",5.652,22.513,false],["2022-06-12",3.041,23.303,false],["2022-06-13",0.0,20.973,false],["2022-06-14",0.0,18.876,false],["2022-06-15",5.403,22.391,false],["2022-06-16",0.0,20.152,false],["2022-06-17",0.0,18.137,false],["2022-06-18",7.035,23.358,false],["2022-06-19",1.459,22.481,false],["2022-06-20",3.996,24.229,false],["2022-06-21",0.945,22.75,false],["2022-06-22",0.0,20.475,false],["2022-06-23",5.19,23.618,false],["2022-06-24",0.0,21.256,false],["2022-06-25",0.441,19.571,false],["2022-06-26",0.0,17.614,false],["2022-06-27",0.0,15.853,false],["2022-06-28",0.0,14.267,false],["2022-06-29",0.0,12.841,false],["2022-06-30",0.0,11.557,false],["2022-07-01",0.0,10.401,false],["2022-07-02",0.0,9.361,false],["2022-07-03",0.0,8.425,false],["2022-07-04",0.0,7.582,false],["2022-07-05",0.0,6.824,false],["2022-07-06",0.0,6.142,false],["2022-07-07",2.603,8.13,false],["2022-07-08",0.0,7.317,false],["2022-07-09",5.131,11.717,false],["2022-07-10",0.0,10.545,false],["2022-07-11",0.0,9.491,false],["2022-07-12",0.0,8.542,false],["2022-07-13",0.846,8.533,false],["2022-07-14",0.0,7.68,false],["2022-07-15",0.0,6.912,false],["2022-07-16",4.368,10.589,false],["2022-07-17",0.0,9.53,false],["2022-07-18",2.798,11.375,false],["2022-07-19",0.0,10.238,false],["2022-07-20",0.0,9.214,false],["2022-07-21",0.238,8.53,false],["2022-07-22",0.0,7.677,false],["2022-07-23",1.012,7.921,false],["2022-07-24",9.95,17.079,false],["2022-07-25",0.44,15.812,false],["2022-07-26",5.888,20.119,false],["2022-07-27",0.0,18.107,false],["2022-07-28",5.622,21.918,false],["2022-07-29",10.397,30.123,false],["2022-07-30",0.0,27.111,false],["2022-07-31",0.0,24.4,false],["2022-08-01",5.009,26.969,false],["2022-08-02",0.0,24.272,false],["2022-08-03",3.04,24.885,false],["2022-08-04",0.0,22.396,false],["2022-08-05",0.0,20.156,false],["2022-08-06",0.838,18.978,false],["2022-08-07",0.0,17.081,false],["2022-08-08",0.0,15.372,false],["2022-08-09",3.3,17.135,false],["2022-08-10",2.931,18.353,false],["2022-08-11",2.222,18.739,false],["2022-08-12",3.557,20.422,false],["2022-08-13",0.342,18.721,false],["2022-08-14",0.0,16.849,false],["2022-08-15",0.0,15.164,false],["2022-08-16",0.0,13.648,false],["2022-08-17",6.324,18.607,false],["2022-08-18",6.521,23.268,false],["2022-08-19",14.994,35.935,false],["2022-08-20",2.77,35.111,false],["2022-08-21",0.0,31.6,false],["2022-08-22",0.289,28.729,false],["2022-08-23",0.0,25.856,false],["2022-08-24",0.0,23.271,false],["2022-08-25",3.638,24.582,false],["2022-08-26",2.658,24.782,false],["2022-08-27",0.0,22.303,false],["2022-08-28",0.368,20.441,false],["2022-08-29",0.0,18.397,false],["2022-08-30",0.069,16.626,false],["2022-08-31",0.0,14.963,false],["2022-09-01",0.0,13.467,false],["2022-09-02",0.294,12.414,false],["2022-09-03",0.0,11.173,false],["2022-09-04",0.0,10.056,false],["2022-09-05",0.0,9.05,false],["2022-09-06",0.0,8.145,false],["2022-09-07",0.133,7.463,false],["2022-09-08",3.049,9.766,false],["2022-09-09",0.0,8.789,false],["2022-09-10",1.947,9.858,false],["2022-09-11",8.639,17.511,false],["2022-09-12",1.942,17.701,false],["2022-09-13",0.0,15.931,false],["2022-09-14",0.0,14.338,false],["2022-09-15",0.0,12.904,false],["2022-09-16",0.0,11.614,false],["2022-09-17",0.0,10.452,false],["2022-09-18",4.124,13.532,false],["2022-09-19",5.385,17.563,false],["2022-09-20",1.889,17.696,false],["2022-09-21",1.367,17.294,false],["2022-09-22",0.0,15.564,false],["2022-09-23",6.358,20.366,false],["2022-09-24",0.0,18.329,false],["2022-09-25",0.0,16.496,false],["2022-09-26",0.0,14.847,false],["2022-09-27",0.051,13.413,false],["2022-09-28",0.0,12.072,false],["2022-09-29",0.0,10.865,false],["2022-09-30",0.042,9.821,false],["2022-10-01",0.0,8.839,false],["2022-10-02",0.0,7.955,false],["2022-10-03",0.473,7.633,false],["2022-10-04",1.909,8.779,false],["2022-10-05",0.0,7.901,false],["2022-10-06",1.491,8.602,false],["2022-10-07",0.0,7.742,false],["2022-10-08",0.0,6.968,false],["2022-10-09",0.0,6.271,false],["2022-10-10",0.0,5.644,false],["2022-10-11",0.0,5.079,false],["2022-10-12",3.161,7.733,false],["2022-10-13",0.0,6.96,false],["2022-10-14",0.0,6.264,false],["2022-10-15",0.0,5.637,false],["2022-10-16",0.0,5.074,false],["2022-10-17",1.698,6.265,false],["2022-10-18",0.0,5.638,false],["2022-10-19",0.0,5.074,false],["2022-10-20",0.0,4.567,false],["2022-10-21",0.0,4.11,false],["2022-10-22",0.346,4.045,false],["2022-10-23",0.0,3.641,false],["2022-10-24",11.029,14.306,false],["2022-10-25",0.0,12.875,false],["2022-10-26",0.0,11.588,false],["2022-10-27",0.0,10.429,false],["2022-10-28",0.0,9.386,false],["2022-10-29",0.0,8.447,false],["2022-10-30",2.056,9.659,false],["2022-10-31",11.644,20.337,false],["2022-11-01",0.0,18.303,false],["2022-11-02",0.0,16.473,false],["2022-11-03",0.0,14.826,false],["2022-11-04",0.0,13.343,false],["2022-11-05",0.0,12.009,false],["2022-11-06",0.0,10.808,false],["2022-11-07",1.237,10.964,false],["2022-11-08",0.279,10.147,false],["2022-11-09",3.541,12.673,false],["2022-11-10",0.939,12.345,false],["2022-11-11",4.11,15.22,false],["2022-11-12",0.0,13.698,false],["2022-11-13",2.258,14.586,false],["2022-11-14",4.092,17.219,false],["2022-11-15",0.0,15.497,false],["2022-11-16",0.497,14.445,false],["2022-11-17",0.0,13.0,false],["2022-11-18",0.0,11.7,false],["2022-11-19",0.0,10.53,false],["2022-11-20",2.357,11.835,false],["2022-11-21",0.0,10.651,false],["2022-11-22",0.845,10.431,false],["2022-11-23",0.226,9.614,false],["2022-11-24",0.0,8.653,false],["2022-11-25",0.253,8.04,false],["2022-11-26",8.946,16.182,false],["2022-11-27",0.0,14.564,false],["2022-11-28",0.0,13.107,false],["2022-11-29",0.482,12.279,false],["2022-11-30",0.0,11.051,false],["2022-12-01",0.0,9.946,false],["2022-12-02",0.0,8.951,false],["2022-12-03",1.997,10.053,false],["2022-12-04",0.0,9.048,false],["2022-12-05",0.0,8.143,false],["2022-12-06",0.0,7.329,false],["2022-12-07",2.291,8.887,false],["2022-12-08",2.368,10.366,false],["2022-12-09",0.223,9.552,false],["2022-12-10",0.774,9.371,false],["2022-12-11",3.81,12.244,false],["2022-12-12",3.478,14.497,false],["2022-12-13",0.0,13.047,false],["2022-12-14",3.144,14.887,false],["2022-12-15",0.401,13.799,false],["2022-12-16",1.968,14.388,false],["2022-12-17",2.131,15.079,false],["2022-12-18",3.074,16.645,false],["2022-12-19",4.271,19.252,false],["2022-12-20",0.0,17.326,false],["2022-12-21",5.073,20.666,false],["2022-12-22",0.0,18.6,false],["2022-12-23",0.148,16.888,false],["2022-12-24",0.0,15.199,false],["2022-12-25",0.0,13.679,false],["2022-12-26",0.0,12.311,false],["2022-12-27",0.0,11.08,false],["2022-12-28",0.0,9.972,false],["2022-12-29",0.0,8.975,false],["2022-12-30",0.0,8.078,false],["2022-12-31",0.805,8.075,false],["2023-01-01",0.0,7.267,false],["2023-01-02",0.0,6.54,false],["2023-01-03",4.987,10.874,false],["2023-01-04",0.478,10.264,false],["2023-01-05",1.465,10.703,false],["2023-01-06",1.507,11.14,false],["2023-01-07",3.365,13.391,false],["2023-01-08",0.0,12.052,false],["2023-01-09",0.0,10.847,false],["2023-01-10",0.518,10.28,false],["2023-01-11",0.0,9.252,false],["2023-01-12",0.0,8.327,false],["2023-01-13",2.07,9.565,false],["2023-01-14",0.0,8.608,false],["2023-01-15",0.0,7.747,false],["2023-01-16",0.0,6.973,false],["2023-01-17",0.0,6.275,false],["2023-01-18",5.827,11.474,false],["2023-01-19",0.873,11.2,false],["2023-01-20",8.588,18.668,false],["2023-01-21",2.002,18.803,false],["2023-01-22",3.819,20.742,false],["2023-01-23",0.609,19.277,false],["2023-01-24",0.0,17.349,false],["2023-01-25",0.0,15.614,false],["2023-01-26",0.313,14.366,false],["2023-01-27",2.904,15.834,false],["2023-01-28",8.006,22.257,false],["2023-01-29",0.0,20.031,false],["2023-01-30",0.0,18.028,false],["2023-01-31",0.0,16.225,false],["2023-02-01",1.68,16.283,false],["2023-02-02",0.0,14.654,false],["2023-02-03",0.0,13.189,false],["2023-02-04",0.0,11.87,false],["2023-02-05",3.892,14.575,false],["2023-02-06",0.0,13.117,false],["2023-02-07",5.951,17.756,false],["2023-02-08",4.199,20.18,false],["2023-02-09",1.444,19.606,false],["2023-02-10",0.0,17.645,false],["2023-02-11",0.0,15.881,false],["2023-02-12",0.0,14.293,false],["2023-02-13",0.0,12.863,false],["2023-02-14",1.578,13.155,false],["2023-02-15",5.883,17.723,false],["2023-02-16",1.553,17.504,false],["2023-02-17",0.181,15.934,false],["2023-02-18",7.979,22.32,false],["2023-02-19",0.0,20.088,false],["2023-02-20",0.0,18.079,false],["2023-02-21",0.0,16.271,false],["2023-02-22",0.0,14.644,false],["2023-02-23",0.0,13.18,false],["2023-02-24",2.53,14.391,false],["2023-02-25",4.255,17.207,false],["2023-02-26",0.0,15.486,false],["2023-02-27",0.0,13.938,false],["2023-02-28",0.0,12.544,false],["2023-03-01",0.0,11.289,false],["2023-03-02",3.33,13.49,false],["2023-03-03",0.872,13.013,false],["2023-03-04",0.981,12.692,false],["2023-03-05",0.0,11.423,false],["2023-03-06",0.0,10.281,false],["2023-03-07",0.543,9.796,false],["2023-03-08",0.947,9.764,false],["2023-03-09",0.0,8.788,false],["2023-03-10",0.0,7.909,false],["2023-03-11",0.0,7.118,false],["2023-03-12",0.0,6.406,false],["2023-03-13",0.0,5.766,false],["2023-03-14",0.0,5.189,false],["2023-03-15",0.0,4.67,false],["2023-03-16",6.045,10.248,false],["2023-03-17",0.0,9.223,false],["2023-03-18",8.662,16.963,false],["2023-03-19",0.0,15.266,false],["2023-03-20",0.0,13.74,false],["2023-03-21",0.0,12.366,false],["2023-03-22",0.0,11.129,false],["2023-03-23",0.0,10.016,false],["2023-03-24",0.542,9.557,false],["2023-03-25",0.0,8.601,false],["2023-03-26",5.855,13.596,false],["2023-03-27",0.336,12.573,false],["2023-03-28",1.693,13.008,false],["2023-03-29",0.0,11.707,false],["2023-03-30",2.989,13.525,false],["2023-03-31",0.0,12.173,false],["2023-04-01",0.0,10.955,false],["2023-04-02",0.0,9.86,false],["2023-04-03",0.0,8.874,false],["2023-04-04",2.542,10.528,false],["2023-04-05",2.058,11.533,false],["2023-04-06",0.0,10.38,false],["2023-04-07",0.0,9.342,false],["2023-04-08",0.0,8.408,false],["2023-04-09",8.001,15.568,false],["2023-04-10",0.0,14.011,false],["2023-04-11",0.0,12.61,false],["2023-04-12",0.0,11.349,false],["2023-04-13",0.0,10.214,false],["2023-04-14",0.0,9.193,false],["2023-04-15",0.0,8.274,false],["2023-04-16",2.742,10.188,false],["2023-04-17",3.017,12.187,false],["2023-04-18",0.0,10.968,false],["2023-04-19",1.114,10.985,false],["2023-04-20",0.131,10.017,false],["2023-04-21",0.184,9.2,false],["2023-04-22",0.0,8.28,false],["2023-04-23",0.0,7.452,false],["2023-04-24",1.03,7.736,false],["2023-04-25",0.63,7.592,false],["2023-04-26",1.454,8.287,false],["2023-04-27",0.0,7.458,false],["2023-04-28",0.527,7.239,false],["2023-04-29",2.666,9.181,false],["2023-04-30",4.042,12.305,false],["2023-05-01",3.409,14.483,false],["2023-05-02",0.067,13.102,false],["2023-05-03",7.642,19.434,false],["2023-05-04",0.0,17.491,false],["2023-05-05",0.0,15.742,false],["2023-05-06",3.977,18.145,false],["2023-05-07",5.975,22.305,false],["2023-05-08",7.968,28.043,false],["2023-05-09",4.735,29.973,false],["2023-05-10",2.971,29.947,false],["2023-05-11",0.0,26.952,false],["2023-05-12",0.115,24.372,false],["2023-05-13",0.0,21.935,false],["2023-05-14",15.578,35.319,false],["2023-05-15",0.0,31.787,false],["2023-05-16",0.0,28.608,false],["2023-05-17",6.006,31.754,false],["2023-05-18",0.0,28.578,false],["2023-05-19",0.0,25.721,false],["2023-05-20",0.0,23.148,false],["2023-05-21",2.664,23.498,false],["2023-05-22",0.0,21.148,false],["2023-05-23",0.0,19.033,false],["2023-05-24",0.86,17.99,false],["2023-05-25",0.0,16.191,false],["2023-05-26",0.0,14.572,false],["2023-05-27",0.0,13.115,false],["2023-05-28",2.859,14.662,false],["2023-05-29",0.0,13.196,false],["2023-05-30",0.213,12.089,false],["2023-05-31",0.0,10.881,false],["2023-06-01",3.63,13.422,false],["2023-06-02",0.0,12.08,false],["2023-06-03",0.0,10.872,false],["2023-06-04",0.0,9.785,false],["2023-06-05",3.972,12.778,false],["2023-06-06",5.074,16.574,false],["2023-06-07",0.0,14.917,false],["2023-06-08",0.0,13.425,false],["2023-06-09",0.0,12.083,false],["2023-06-10",0.0,10.874,false],["2023-06-11",3.014,12.8,false],["2023-06-12",0.0,11.52,false],["2023-06-13",0.0,10.368,false],["2023-06-14",0.0,9.332,false],["2023-06-15",3.488,11.887,false],["2023-06-16",0.0,10.698,false],["2023-06-17",0.0,9.628,false],["2023-06-18",0.0,8.665,false],["2023-06-19",5.23,13.029,false],["2023-06-20",0.0,11.726,false],["2023-06-21",0.0,10.554,false],["2023-06-22",13.853,23.351,false],["2023-06-23",1.588,22.604,false],["2023-06-24",0.0,20.344,false],["2023-06-25",1.051,19.361,false],["2023-06-26",0.0,17.425,false],["2023-06-27",0.0,15.682,false],["2023-06-28",0.0,14.114,false],["2023-06-29",0.0,12.703,false],["2023-06-30",0.0,11.432,false],["2023-07-01",0.0,10.289,false],["2023-07-02",0.457,9.717,false],["2023-07-03",0.0,8.745,false],["2023-07-04",4.764,12.635,false],["2023-07-05",0.727,12.098,false],["2023-07-06",0.0,10.888,false],["2023-07-07",0.0,9.799,false],["2023-07-08",3.17,11.99,false],["2023-07-09",8.361,19.152,false],["2023-07-10",4.362,21.599,false],["2023-07-11",0.0,19.439,false],["2023-07-12",1.519,19.014,false],["2023-07-13",0.961,18.073,false],["2023-07-14",0.0,16.266,false],["2023-07-15",1.167,15.807,false],["2023-07-16",1.578,15.805,false],["2023-07-17",1.097,15.321,false],["2023-07-18",0.093,13.882,false],["2023-07-19",0.0,12.494,false],["2023-07-20",0.0,11.244,false],["2023-07-21",4.864,14.984,false],["2023-07-22",0.0,13.486,false],["2023-07-23",0.0,12.137,false],["2023-07-24",0.0,10.923,false],["2023-07-25",2.328,12.159,false],["2023-07-26",0.0,10.943,false],["2023-07-27",0.0,9.848,false],["2023-07-28",0.0,8.864,false],["2023-07-29",0.0,7.977,false],["2023-07-30",2.091,9.271,false],["2023-07-31",1.753,10.096,false],["2023-08-01",0.0,9.087,false],["2023-08-02",2.897,11.076,false],["2023-08-03",1.16,11.127,false],["2023-08-04",2.74,12.754,false],["2023-08-05",0.0,11.479,false],["2023-08-06",0.0,10.331,false],["2023-08-07",7.584,16.882,false],["2023-08-08",3.841,19.035,false],["2023-08-09",0.0,17.131,false],["2023-08-10",0.0,15.418,false],["2023-08-11",0.0,13.876,false],["2023-08-12",0.0,12.489,false],["2023-08-13",0.0,11.24,false],["2023-08-14",0.009,10.125,false],["2023-08-15",0.637,9.75,false],["2023-08-16",0.0,8.775,false],["2023-08-17",0.0,7.897,false],["2023-08-18",0.0,7.108,false],["2023-08-19",0.0,6.397,false],["2023-08-20",0.0,5.757,false],["2023-08-21",5.578,10.76,false],["2023-08-22",5.909,15.592,false],["2023-08-23",1.066,15.099,false],["2023-08-24",2.723,16.312,false],["2023-08-25",0.0,14.681,false],["2023-08-26",5.8,19.013,false],["2023-08-27",0.163,17.275,false],["2023-08-28",0.0,15.547,false],["2023-08-29",0.0,13.992,false],["2023-08-30",10.707,23.3,false],["2023-08-31",0.0,20.97,false],["2023-09-01",5.649,24.522,false],["2023-09-02",0.0,22.07,false],["2023-09-03",0.0,19.863,false],["2023-09-04",0.0,17.876,false],["2023-09-05",0.0,16.089,false],["2023-09-06",0.0,14.48,false],["2023-09-07",7.651,20.683,false],["2023-09-08",0.0,18.615,false],["2023-09-09",2.643,19.396,false],["2023-09-10",0.0,17.457,false],["2023-09-11",0.475,16.186,false],["2023-09-12",0.0,14.567,false],["2023-09-13",0.0,13.111,false],["2023-09-14",1.084,12.883,false],["2023-09-15",0.0,11.595,false],["2023-09-16",0.0,10.436,false],["2023-09-17",1.162,10.554,false],["2023-09-18",0.0,9.498,false],["2023-09-19",0.0,8.549,false],["2023-09-20",0.0,7.694,false],["2023-09-21",0.0,6.924,false],["2023-09-22",0.0,6.232,false],["2023-09-23",0.0,5.609,false],["2023-09-24",0.0,5.048,false],["2023-09-25",6.946,11.489,false],["2023-09-26",0.0,10.34,false],["2023-09-27",0.0,9.306,false],["2023-09-28",2.95,11.326,false],["2023-09-29",0.0,10.193,false],["2023-09-30",1.286,10.46,false],["2023-10-01",1.684,11.098,false],["2023-10-02",0.0,9.989,false],["2023-10-03",0.0,8.99,false],["2023-10-04",0.0,8.091,false],["2023-10-05",0.613,7.895,false],["2023-10-06",0.0,7.105,false],["2023-10-07",0.903,7.298,false],["2023-10-08",0.0,6.568,false],["2023-10-09",0.0,5.911,false],["2023-10-10",1.141,6.461,false],["2023-10-11",4.892,10.707,false],["2023-10-12",0.737,10.373,false],["2023-10-13",0.0,9.336,false],["2023-10-14",3.249,11.651,false],["2023-10-15",1.203,11.689,false],["2023-10-16",0.0,10.52,false],["2023-10-17",11.901,21.369,false],["2023-10-18",1.609,20.841,false],["2023-10-19",0.0,18.757,false],["2023-10-20",10.0,26.881,false],["2023-10-21",25.0,49.193,false],["2023-10-22",15.0,59.274,false],["2023-10-23",12.0,65.346,true],["2023-10-24",46.0,104.812,true],["2023-10-25",0.0,94.33,true],["2023-10-26",0.0,84.897,true],["2023-10-27",1.574,77.982,true],["2023-10-28",0.518,70.702,true],["2023-10-29",0.0,63.632,false],["2023-10-30",0.0,57.269,false],["2023-10-31",0.0,51.542,false],["2023-11-01",0.0,46.387,false],["2023-11-02",0.0,41.749,false],["2023-11-03",0.0,37.574,false],["2023-11-04",3.939,37.755,false],["2023-11-05",5.956,39.936,false],["2023-11-06",0.0,35.942,false],["2023-11-07",0.0,32.348,false],["2023-11-08",0.0,29.113,false],["2023-11-09",0.0,26.202,false],["2023-11-10",0.0,23.582,false],["2023-11-11",0.0,21.223,false],["2023-11-12",0.0,19.101,false],["2023-11-13",0.0,17.191,false],["2023-11-14",2.121,17.593,false],["2023-11-15",4.351,20.184,false],["2023-11-16",0.48,18.646,false],["2023-11-17",0.91,17.691,false],["2023-11-18",0.0,15.922,false],["2023-11-19",0.351,14.681,false],["2023-11-20",0.0,13.213,false],["2023-11-21",0.0,11.891,false],["2023-11-22",1.288,11.99,false],["2023-11-23",2.604,13.395,false],["2023-11-24",0.0,12.056,false],["2023-11-25",0.0,10.85,false],["2023-11-26",0.0,9.765,false],["2023-11-27",6.582,15.371,false],["2023-11-28",0.0,13.834,false],["2023-11-29",0.0,12.451,false],["2023-11-30",3.585,14.79,false],["2023-12-01",0.0,13.311,false],["2023-12-02",3.158,15.138,false],["2023-12-03",2.063,15.687,false],["2023-12-04",0.0,14.118,false],["2023-12-05",0.0,12.706,false],["2023-12-06",0.0,11.436,false],["2023-12-07",0.0,10.292,false],["2023-12-08",1.311,10.574,false],["2023-12-09",0.0,9.516,false],["2023-12-10",1.173,9.738,false],["2023-12-11",1.275,10.039,false],["2023-12-12",0.0,9.035,false],["2023-12-13",2.42,10.551,false],["2023-12-14",0.0,9.496,false],["2023-12-15",3.17,11.716,false],["2023-12-16",0.879,11.423,false],["2023-12-17",0.939,11.22,false],["2023-12-18",3.086,13.184,false],["2023-12-19",0.616,12.481,false],["2023-12-20",2.208,13.441,false],["2023-12-21",0.0,12.097,false],["2023-12-22",1.885,12.772,false],["2023-12-23",0.0,11.495,false],["2023-12-24",0.0,10.346,false],["2023-12-25",0.0,9.311,false],["2023-12-26",0.0,8.38,false],["2023-12-27",0.506,8.048,false],["2023-12-28",0.0,7.243,false],["2023-12-29",4.283,10.802,false],["2023-12-30",0.0,9.722,false],["2023-12-31",7.276,16.025,false],["2024-01-01",0.0,14.423,false],["2024-01-02",0.0,12.98,false],["2024-01-03",0.618,12.3,false],["2024-01-04",0.0,11.07,false],["2024-01-05",0.0,9.963,false],["2024-01-06",0.0,8.967,false],["2024-01-07",0.0,8.07,false],["2024-01-08",0.0,7.263,false],["2024-01-09",0.0,6.537,false],["2024-01-10",0.0,5.883,false],["2024-01-11",0.0,5.295,false],["2024-01-12",0.0,4.765,false],["2024-01-13",0.0,4.289,false],["2024-01-14",0.0,3.86,false],["2024-01-15",0.0,3.474,false],["2024-01-16",0.0,3.127,false],["2024-01-17",0.0,2.814,false],["2024-01-18",0.0,2.532,false],["2024-01-19",0.0,2.279,false],["2024-01-20",0.0,2.051,false],["2024-01-21",0.0,1.846,false],["2024-01-22",0.0,1.662,false],["2024-01-23",0.516,2.011,false],["2024-01-24",1.235,3.045,false],["2024-01-25",0.457,3.198,false],["2024-01-26",0.0,2.878,false],["2024-01-27",2.528,5.118,false],["2024-01-28",0.0,4.606,false],["2024-01-29",0.0,4.146,false],["2024-01-30",3.789,7.52,false],["2024-01-31",0.0,6.768,false],["2024-02-01",8.448,14.539,false],["2024-02-02",9.553,22.638,false],["2024-02-03",2.111,22.485,false],["2024-02-04",0.0,20.237,false],["2024-02-05",0.0,18.213,false],["2024-02-06",0.0,16.392,false],["2024-02-07",0.0,14.753,false],["2024-02-08",3.395,16.672,false],["2024-02-09",0.0,15.005,false],["2024-02-10",6.11,19.614,false],["2024-02-11",0.306,17.959,false],["2024-02-12",1.323,17.486,false],["2024-02-13",0.0,15.737,false],["2024-02-14",14.428,28.592,false],["2024-02-15",0.0,25.733,false],["2024-02-16",0.0,23.16,false],["2024-02-17",0.831,21.675,false],["2024-02-18",0.0,19.507,false],["2024-02-19",3.111,20.667,false],["2024-02-20",0.0,18.601,false],["2024-02-21",0.0,16.74,false],["2024-02-22",5.013,20.079,false],["2024-02-23",0.0,18.071,false],["2024-02-24",2.195,18.459,false],["2024-02-25",2.617,19.23,false],["2024-02-26",0.233,17.54,false],["2024-02-27",3.529,19.315,false],["2024-02-28",3.008,20.392,false],["2024-02-29",0.0,18.353,false],["2024-03-01",2.557,19.074,false],["2024-03-02",0.0,17.167,false],["2024-03-03",0.0,15.45,false],["2024-03-04",0.0,13.905,false],["2024-03-05",0.0,12.515,false],["2024-03-06",0.0,11.263,false],["2024-03-07",7.123,17.259,false],["2024-03-08",0.475,16.008,false],["2024-03-09",0.0,14.408,false],["2024-03-10",8.297,21.264,false],["2024-03-11",1.102,20.239,false],["2024-03-12",0.0,18.215,false],["2024-03-13",0.0,16.394,false],["2024-03-14",0.0,14.754,false],["2024-03-15",0.0,13.279,false],["2024-03-16",0.0,11.951,false],["2024-03-17",0.0,10.756,false],["2024-03-18",0.0,9.68,false],["2024-03-19",0.574,9.286,false],["2024-03-20",0.0,8.358,false],["2024-03-21",0.0,7.522,false],["2024-03-22",0.0,6.77,false],["2024-03-23",4.981,11.073,false],["2024-03-24",0.0,9.966,false],["2024-03-25",5.995,14.965,false],["2024-03-26",0.0,13.468,false],["2024-03-27",0.731,12.853,false],["2024-03-28",0.0,11.568,false],["2024-03-29",0.0,10.411,false],["2024-03-30",0.054,9.423,false],["2024-03-31",7.164,15.645,false],["2024-04-01",1.925,16.006,false],["2024-04-02",0.0,14.405,false],["2024-04-03",5.288,18.253,false],["2024-04-04",0.0,16.427,false],["2024-04-05",0.176,14.96,false],["2024-04-06",0.0,13.464,false],["2024-04-07",0.0,12.118,false],["2024-04-08",0.255,11.161,false],["2024-04-09",0.0,10.045,false],["2024-04-10",0.0,9.04,false],["2024-04-11",4.044,12.181,false],["2024-04-12",0.0,10.963,false],["2024-04-13",0.0,9.866,false],["2024-04-14",5.531,14.411,false],["2024-04-15",0.908,13.878,false],["2024-04-16",0.0,12.49,false],["2024-04-17",1.676,12.917,false],["2024-04-18",0.003,11.628,false],["2024-04-19",2.565,13.03,false],["2024-04-20",0.0,11.727,false],["2024-04-21",0.0,10.554,false],["2024-04-22",0.0,9.499,false],["2024-04-23",0.0,8.549,false],["2024-04-24",3.22,10.914,false],["2024-04-25",0.0,9.823,false],["2024-04-26",0.0,8.841,false],["2024-04-27",3.132,11.088,false],["2024-04-28",0.0,9.98,false],["2024-04-29",0.0,8.982,false],["2024-04-30",0.292,8.375,false],["2024-05-01",0.911,8.449,false],["2024-05-02",3.223,10.827,false],["2024-05-03",0.0,9.744,false],["2024-05-04",0.0,8.77,false],["2024-05-05",0.0,7.893,false],["2024-05-06",3.492,10.595,false],["2024-05-07",8.888,18.423,false],["2024-05-08",0.0,16.581,false],["2024-05-09",1.229,16.152,false],["2024-05-10",0.0,14.536,false],["2024-05-11",0.0,13.083,false],["2024-05-12",0.0,11.775,false],["2024-05-13",8.429,19.026,false],["2024-05-14",1.445,18.568,false],["2024-05-15",0.0,16.711,false],["2024-05-16",0.0,15.04,false],["2024-05-17",0.0,13.536,false],["2024-05-18",15.853,28.035,false],["2024-05-19",0.0,25.232,false],["2024-05-20",0.0,22.709,false],["2024-05-21",0.0,20.438,false],["2024-05-22",3.007,21.401,false],["2024-05-23",2.543,21.804,false],["2024-05-24",0.0,19.624,false],["2024-05-25",0.946,18.607,false],["2024-05-26",0.947,17.694,false],["2024-05-27",1.844,17.769,false],["2024-05-28",0.0,15.992,false],["2024-05-29",0.0,14.393,false],["2024-05-30",0.0,12.954,false],["2024-05-31",0.0,11.658,false],["2024-06-01",2.882,13.375,false],["2024-06-02",4.656,16.693,false],["2024-06-03",0.0,15.024,false],["2024-06-04",0.0,13.521,false],["2024-06-05",0.0,12.169,false],["2024-06-06",6.671,17.623,false],["2024-06-07",4.708,20.569,false],["2024-06-08",0.0,18.512,false],["2024-06-09",0.0,16.661,false],["2024-06-10",0.0,14.994,false],["2024-06-11",0.934,14.429,false],["2024-06-12",0.0,12.986,false],["2024-06-13",0.0,11.687,false],["2024-06-14",11.47,21.988,false],["2024-06-15",0.849,20.638,false],["2024-06-16",7.402,25.976,false],["2024-06-17",0.0,23.379,false],["2024-06-18",0.0,21.041,false],["2024-06-19",3.031,21.967,false],["2024-06-20",0.0,19.77,false],["2024-06-21",0.0,17.793,false],["2024-06-22",0.779,16.793,false],["2024-06-23",0.0,15.114,false],["2024-06-24",1.89,15.492,false],["2024-06-25",0.0,13.943,false],["2024-06-26",0.0,12.549,false],["2024-06-27",0.0,11.294,false],["2024-06-28",1.183,11.348,false],["2024-06-29",0.0,10.213,false],["2024-06-30",0.0,9.192,false],["2024-07-01",5.24,13.513,false],["2024-07-02",0.0,12.162,false],["2024-07-03",0.0,10.945,false],["2024-07-04",1.115,10.966,false],["2024-07-05",0.4,10.269,false],["2024-07-06",2.126,11.368,false],["2024-07-07",0.0,10.231,false],["2024-07-08",0.0,9.208,false],["2024-07-09",0.0,8.287,false],["2024-07-10",0.0,7.459,false],["2024-07-11",0.0,6.713,false],["2024-07-12",0.0,6.041,false],["2024-07-13",1.363,6.8,false],["2024-07-14",0.0,6.12,false],["2024-07-15",3.112,8.621,false],["2024-07-16",0.0,7.759,false],["2024-07-17",0.016,6.999,false],["2024-07-18",1.473,7.773,false],["2024-07-19",3.231,10.226,false],["2024-07-20",3.905,13.108,false],["2024-07-21",6.724,18.521,false],["2024-07-22",4.363,21.032,false],["2024-07-23",5.745,24.674,false],["2024-07-24",0.0,22.207,false],["2024-07-25",0.612,20.599,false],["2024-07-26",0.0,18.539,false],["2024-07-27",0.0,16.685,false],["2024-07-28",3.614,18.63,false],["2024-07-29",0.0,16.767,false],["2024-07-30",0.0,15.09,false],["2024-07-31",0.0,13.581,false],["2024-08-01",0.0,12.223,false],["2024-08-02",0.0,11.001,false],["2024-08-03",4.14,14.041,false],["2024-08-04",0.0,12.637,false],["2024-08-05",10.056,21.429,false],["2024-08-06",3.39,22.676,false],["2024-08-07",0.0,20.408,false],["2024-08-08",0.0,18.367,false],["2024-08-09",1.061,17.592,false],["2024-08-10",1.563,17.395,false],["2024-08-11",0.0,15.656,false],["2024-08-12",0.0,14.09,false],["2024-08-13",0.0,12.681,false],["2024-08-14",0.0,11.413,false],["2024-08-15",0.0,10.272,false],["2024-08-16",0.0,9.245,false],["2024-08-17",0.0,8.32,false],["2024-08-18",0.0,7.488,false],["2024-08-19",0.0,6.739,false],["2024-08-20",0.0,6.065,false],["2024-08-21",0.0,5.459,false],["2024-08-22",0.0,4.913,false],["2024-08-23",2.547,6.968,false],["2024-08-24",0.0,6.272,false],["2024-08-25",0.0,5.644,false],["2024-08-26",0.0,5.08,false],["2024-08-27",0.0,4.572,false],["2024-08-28",0.929,5.044,false],["2024-08-29",0.0,4.539,false],["2024-08-30",0.0,4.085,false],["2024-08-31",5.181,8.858,false],["2024-09-01",0.0,7.972,false],["2024-09-02",0.0,7.175,false],["2024-09-03",0.0,6.458,false],["2024-09-04",2.677,8.489,false],["2024-09-05",0.0,7.64,false],["2024-09-06",0.0,6.876,false],["2024-09-07",0.0,6.189,false],["2024-09-08",1.443,7.013,false],["2024-09-09",0.0,6.312,false],["2024-09-10",0.0,5.681,false],["2024-09-11",0.0,5.113,false],["2024-09-12",7.045,11.647,false],["2024-09-13",1.999,12.481,false],["2024-09-14",19.778,31.011,false],["2024-09-15",1.756,29.666,false],["2024-09-16",0.0,26.7,false],["2024-09-17",0.0,24.03,false],["2024-09-18",0.0,21.627,false],["2024-09-19",1.074,20.538,false],["2024-09-20",1.111,19.595,false],["2024-09-21",2.198,19.833,false],["2024-09-22",0.0,17.85,false],["2024-09-23",0.0,16.065,false],["2024-09-24",0.0,14.458,false],["2024-09-25",7.255,20.268,false],["2024-09-26",0.91,19.151,false],["2024-09-27",0.0,17.236,false],["2024-09-28",0.0,15.512,false],["2024-09-29",0.0,13.961,false],["2024-09-30",0.0,12.565,false],["2024-10-01",0.0,11.308,false],["2024-10-02",9.41,19.587,false],["2024-10-03",0.248,17.877,false],["2024-10-04",1.776,17.865,false],["2024-10-05",0.704,16.782,false],["2024-10-06",0.185,15.289,false],["2024-10-07",5.906,19.666,false],["2024-10-08",3.971,21.67,false],["2024-10-09",0.718,20.221,false],["2024-10-10",0.661,18.859,false],["2024-10-11",0.0,16.973,false],["2024-10-12",0.0,15.276,false],["2024-10-13",0.0,13.748,false],["2024-10-14",0.316,12.69,false],["2024-10-15",0.0,11.421,false],["2024-10-16",3.635,13.913,false],["2024-10-17",1.972,14.494,false],["2024-10-18",0.0,13.044,false],["2024-10-19",0.0,11.74,false],["2024-10-20",0.0,10.566,false],["2024-10-21",3.073,12.582,false],["2024-10-22",0.0,11.324,false],["2024-10-23",7.175,17.366,false],["2024-10-24",0.0,15.63,false],["2024-10-25",5.783,19.85,false],["2024-10-26",0.0,17.865,false],["2024-10-27",0.0,16.079,false],["2024-10-28",0.038,14.509,false],["2024-10-29",0.961,14.019,false],["2024-10-30",6.767,19.384,false],["2024-10-31",2.774,20.22,false],["2024-11-01",0.0,18.198,false],["2024-11-02",0.458,16.836,false],["2024-11-03",0.0,15.152,false],["2024-11-04",3.987,17.624,false],["2024-11-05",0.0,15.862,false],["2024-11-06",0.0,14.276,false],["2024-11-07",0.0,12.848,false],["2024-11-08",8.27,19.834,false],["2024-11-09",0.0,17.85,false],["2024-11-10",0.0,16.065,false],["2024-11-11",4.372,18.831,false],["2024-11-12",4.483,21.431,false],["2024-11-13",0.0,19.288,false],["2024-11-14",0.733,18.092,false],["2024-11-15",5.966,22.249,false],["2024-11-16",0.0,20.024,false],["2024-11-17",7.833,25.855,false],["2024-11-18",0.0,23.269,false],["2024-11-19",0.0,20.942,false],["2024-11-20",1.374,20.222,false],["2024-11-21",7.97,26.17,false],["2024-11-22",0.0,23.553,false],["2024-11-23",3.383,24.581,false],["2024-11-24",4.396,26.519,false],["2024-11-25",7.073,30.941,false],["2024-11-26",0.0,27.847,false],["2024-11-27",0.538,25.6,false],["2024-11-28",5.341,28.381,false],["2024-11-29",1.574,27.118,false],["2024-11-30",0.0,24.406,false],["2024-12-01",0.0,21.965,false],["2024-12-02",0.0,19.769,false],["2024-12-03",0.0,17.792,false],["2024-12-04",0.0,16.013,false],["2024-12-05",0.0,14.411,false],["2024-12-06",0.559,13.529,false],["2024-12-07",8.294,20.471,false],["2024-12-08",0.0,18.424,false],["2024-12-09",0.0,16.581,false],["2024-12-10",0.0,14.923,false],["2024-12-11",0.307,13.738,false],["2024-12-12",0.0,12.364,false],["2024-12-13",4.157,15.284,false],["2024-12-14",1.552,15.308,false],["2024-12-15",0.0,13.777,false],["2024-12-16",0.671,13.07,false],["2024-12-17",0.0,11.763,false],["2024-12-18",0.0,10.587,false],["2024-12-19",0.0,9.528,false],["2024-12-20",0.0,8.575,false],["2024-12-21",0.0,7.718,false],["2024-12-22",2.452,9.398,false],["2024-12-23",10.414,18.873,false],["2024-12-24",0.0,16.985,false],["2024-12-25",0.0,15.287,false],["2024-12-26",0.0,13.758,false],["2024-12-27",0.0,12.382,false],["2024-12-28",0.0,11.144,false],["2024-12-29",0.0,10.03,false],["2024-12-30",0.0,9.027,false],["2024-12-31",0.0,8.124,false],["2025-01-01",0.2,7.511,false],["2025-01-02",0.0,6.76,false],["2025-01-03",0.884,6.968,false],["2025-01-04",0.0,6.271,false],["2025-01-05",4.54,10.184,false],["2025-01-06",0.0,9.166,false],["2025-01-07",9.134,17.384,false],["2025-01-08",4.711,20.356,false],["2025-01-09",0.223,18.544,false],["2025-01-10",2.078,18.768,false],["2025-01-11",0.716,17.607,false],["2025-01-12",0.0,15.846,false],["2025-01-13",0.0,14.261,false],["2025-01-14",0.0,12.835,false],["2025-01-15",0.0,11.552,false],["2025-01-16",3.623,14.019,false],["2025-01-17",4.739,17.357,false],["2025-01-18",0.144,15.765,false],["2025-01-19",0.0,14.188,false],["2025-01-20",0.0,12.77,false],["2025-01-21",0.227,11.719,false],["2025-01-22",0.0,10.547,false],["2025-01-23",0.0,9.493,false],["2025-01-24",0.0,8.543,false],["2025-01-25",0.0,7.689,false],["2025-01-26",4.236,11.157,false],["2025-01-27",0.0,10.041,false],["2025-01-28",0.0,9.037,false],["2025-01-29",8.371,16.504,false],["2025-01-30",3.607,18.461,false],["2025-01-31",0.0,16.615,false],["2025-02-01",5.001,19.954,false],["2025-02-02",6.191,24.15,false],["2025-02-03",0.0,21.735,false],["2025-02-04",4.019,23.58,false],["2025-02-05",0.0,21.222,false],["2025-02-06",2.989,22.088,false],["2025-02-07",0.0,19.88,false],["2025-02-08",0.0,17.892,false],["2025-02-09",0.167,16.27,false],["2025-02-10",0.0,14.643,false],["2025-02-11",3.382,16.561,false],["2025-02-12",0.0,14.905,false],["2025-02-13",0.0,13.414,false],["2025-02-14",0.377,12.449,false],["2025-02-15",0.0,11.204,false],["2025-02-16",7.17,17.254,false],["2025-02-17",0.0,15.528,false],["2025-02-18",0.0,13.976,false],["2025-02-19",3.249,15.827,false],["2025-02-20",5.239,19.483,false],["2025-02-21",0.0,17.535,false],["2025-02-22",0.0,15.781,false],["2025-02-23",7.67,21.873,false],["2025-02-24",3.862,23.548,false],["2025-02-25",0.0,21.193,false],["2025-02-26",0.0,19.074,false],["2025-02-27",0.0,17.166,false],["2025-02-28",0.0,15.45,false],["2025-03-01",3.462,17.366,false],["2025-03-02",0.0,15.63,false],["2025-03-03",0.0,14.067,false],["2025-03-04",2.188,14.848,false],["2025-03-05",0.0,13.363,false],["2025-03-06",0.0,12.027,false],["2025-03-07",0.0,10.824,false],["2025-03-08",0.0,9.742,false],["2025-03-09",0.0,8.768,false],["2025-03-10",0.0,7.891,false],["2025-03-11",1.467,8.569,false],["2025-03-12",0.0,7.712,false],["2025-03-13",8.178,15.118,false],["2025-03-14",0.0,13.606,false],["2025-03-15",0.0,12.246,false],["2025-03-16",0.0,11.021,false],["2025-03-17",0.0,9.919,false],["2025-03-18",0.179,9.106,false],["2025-03-19",0.0,8.196,false],["2025-03-20",0.0,7.376,false],["2025-03-21",1.76,8.398,false],["2025-03-22",0.0,7.558,false],["2025-03-23",0.0,6.802,false],["2025-03-24",5.882,12.004,false],["2025-03-25",0.0,10.803,false],["2025-03-26",1.752,11.475,false],["2025-03-27",13.114,23.442,false],["2025-03-28",1.808,22.905,false],["2025-03-29",6.997,27.612,false],["2025-03-30",0.0,24.851,false],["2025-03-31",1.464,23.83,false],["2025-04-01",0.0,21.447,false],["2025-04-02",1.326,20.628,false],["2025-04-03",0.0,18.565,false],["2025-04-04",0.0,16.709,false],["2025-04-05",0.0,15.038,false],["2025-04-06",7.342,20.876,false],["2025-04-07",0.0,18.788,false],["2025-04-08",0.004,16.914,false],["2025-04-09",0.0,15.222,false],["2025-04-10",13.017,26.717,false],["2025-04-11",0.0,24.046,false],["2025-04-12",14.79,36.431,false],["2025-04-13",0.0,32.788,false],["2025-04-14",0.223,29.732,false],["2025-04-15",3.903,30.662,false],["2025-04-16",8.032,35.628,false],["2025-04-17",4.417,36.482,false],["2025-04-18",0.829,33.663,false],["2025-04-19",0.0,30.296,false],["2025-04-20",0.0,27.267,false],["2025-04-21",0.0,24.54,false],["2025-04-22",0.0,22.086,false],["2025-04-23",0.0,19.878,false],["2025-04-24",1.42,19.31,false],["2025-04-25",0.0,17.379,false],["2025-04-26",3.553,19.194,false],["2025-04-27",0.0,17.275,false],["2025-04-28",0.28,15.828,false],["2025-04-29",0.0,14.245,false],["2025-04-30",0.397,13.218,false],["2025-05-01",0.0,11.896,false],["2025-05-02",0.0,10.706,false],["2025-05-03",0.0,9.636,false],["2025-05-04",0.0,8.672,false],["2025-05-05",0.0,7.805,false],["2025-05-06",2.281,9.305,false],["2025-05-07",0.402,8.777,false],["2025-05-08",3.036,10.935,false],["2025-05-09",0.0,9.841,false],["2025-05-10",0.0,8.857,false],["2025-05-11",0.0,7.971,false],["2025-05-12",2.534,9.708,false],["2025-05-13",0.0,8.737,false],["2025-05-14",0.047,7.911,false],["2025-05-15",6.151,13.27,false],["2025-05-16",0.0,11.943,false],["2025-05-17",0.732,11.481,false],["2025-05-18",14.305,24.638,false],["2025-05-19",9.135,31.309,false],["2025-05-20",0.0,28.178,false],["2025-05-21",0.0,25.36,false],["2025-05-22",0.0,22.824,false],["2025-05-23",9.853,30.395,false],["2025-05-24",3.117,30.473,false],["2025-05-25",3.377,30.802,false],["2025-05-26",0.0,27.722,false],["2025-05-27",3.128,28.078,false],["2025-05-28",1.481,26.752,false],["2025-05-29",0.0,24.076,false],["2025-05-30",0.066,21.735,false],["2025-05-31",6.185,25.747,false],["2025-06-01",2.193,25.365,false],["2025-06-02",4.401,27.229,false],["2025-06-03",0.956,25.462,false],["2025-06-04",0.0,22.916,false],["2025-06-05",0.0,20.624,false],["2025-06-06",0.0,18.562,false],["2025-06-07",0.0,16.706,false],["2025-06-08",0.0,15.035,false],["2025-06-09",0.0,13.532,false],["2025-06-10",0.0,12.179,false],["2025-06-11",0.0,10.961,false],["2025-06-12",0.0,9.865,false],["2025-06-13",2.217,11.095,false],["2025-06-14",1.21,11.196,false],["2025-06-15",0.473,10.55,false],["2025-06-16",0.0,9.495,false],["2025-06-17",0.0,8.545,false],["2025-06-18",0.0,7.691,false],["2025-06-19",4.023,10.945,false],["2025-06-20",0.0,9.851,false],["2025-06-21",7.132,15.998,false],["2025-06-22",9.203,23.601,false],["2025-06-23",0.0,21.241,false],["2025-06-24",6.07,25.187,false],["2025-06-25",8.123,30.791,false],["2025-06-26",5.49,33.202,false],["2025-06-27",8.563,38.445,false],["2025-06-28",1.068,35.669,false],["2025-06-29",0.0,32.102,false],["2025-06-30",9.184,38.075,false],["2025-07-01",1.897,36.165,false],["2025-07-02",0.0,32.549,false],["2025-07-03",1.703,30.997,false],["2025-07-04",0.936,28.833,false],["2025-07-05",2.279,28.229,false],["2025-07-06",1.294,26.7,false],["2025-07-07",0.0,24.03,false],["2025-07-08",0.0,21.627,false],["2025-07-09",8.556,28.021,false],["2025-07-10",0.0,25.219,false],["2025-07-11",0.0,22.697,false],["2025-07-12",0.0,20.427,false],["2025-07-13",4.983,23.368,false],["2025-07-14",0.0,21.031,false],["2025-07-15",5.486,24.414,false],["2025-07-16",4.583,26.556,false],["2025-07-17",0.0,23.9,false],["2025-07-18",8.055,29.565,false],["2025-07-19",0.0,26.609,false],["2025-07-20",1.602,25.55,false],["2025-07-21",0.0,22.995,false],["2025-07-22",0.0,20.696,false],["2025-07-23",7.545,26.171,false],["2025-07-24",4.852,28.406,false],["2025-07-25",0.0,25.565,false],["2025-07-26",1.47,24.478,false],["2025-07-27",0.0,22.031,false],["2025-07-28",0.0,19.827,false],["2025-07-29",0.0,17.845,false],["2025-07-30",0.0,16.06,false],["2025-07-31",0.0,14.454,false],["2025-08-01",0.0,13.009,false],["2025-08-02",0.0,11.708,false],["2025-08-03",0.0,10.537,false],["2025-08-04",0.0,9.483,false],["2025-08-05",0.0,8.535,false],["2025-08-06",5.031,12.712,false],["2025-08-07",0.0,11.441,false],["2025-08-08",1.278,11.575,false],["2025-08-09",0.639,11.056,false],["2025-08-10",0.0,9.951,false],["2025-08-11",0.0,8.956,false],["2025-08-12",10.132,18.192,false],["2025-08-13",0.0,16.373,false],["2025-08-14",0.0,14.736,false],["2025-08-15",0.0,13.262,false],["2025-08-16",5.852,17.788,false],["2025-08-17",0.0,16.009,false],["2025-08-18",0.0,14.408,false],["2025-08-19",0.945,13.912,false],["2025-08-20",0.0,12.521,false],["2025-08-21",2.739,14.008,false],["2025-08-22",0.292,12.9,false],["2025-08-23",3.086,14.696,false],["2025-08-24",3.19,16.416,false],["2025-08-25",0.0,14.775,false],["2025-08-26",0.0,13.297,false],["2025-08-27",3.385,15.353,false],["2025-08-28",4.994,18.812,false],["2025-08-29",4.161,21.092,false],["2025-08-30",0.0,18.983,false],["2025-08-31",1.046,18.131,false],["2025-09-01",0.94,17.258,false],["2025-09-02",0.0,15.532,false],["2025-09-03",3.32,17.299,false],["2025-09-04",3.928,19.497,false],["2025-09-05",2.679,20.226,false],["2025-09-06",4.027,22.231,false],["2025-09-07",2.062,22.07,false],["2025-09-08",0.0,19.863,false],["2025-09-09",7.239,25.115,false],["2025-09-10",2.319,24.923,false],["2025-09-11",0.0,22.43,false],["2025-09-12",0.0,20.187,false],["2025-09-13",0.0,18.169,false],["2025-09-14",3.23,19.582,false],["2025-09-15",0.0,17.624,false],["2025-09-16",0.0,15.861,false],["2025-09-17",0.0,14.275,false],["2025-09-18",3.544,16.392,false],["2025-09-19",0.0,14.752,false],["2025-09-20",0.0,13.277,false],["2025-09-21",2.514,14.464,false],["2025-09-22",4.154,17.171,false],["2025-09-23",0.0,15.454,false],["2025-09-24",0.0,13.909,false],["2025-09-25",0.0,12.518,false],["2025-09-26",0.0,11.266,false],["2025-09-27",0.0,10.14,false],["2025-09-28",4.404,13.53,false],["2025-09-29",0.0,12.177,false],["2025-09-30",0.0,10.959,false],["2025-10-01",5.586,15.449,false],["2025-10-02",0.0,13.904,false],["2025-10-03",0.0,12.514,false],["2025-10-04",0.0,11.262,false],["2025-10-05",3.84,13.976,false],["2025-10-06",0.0,12.579,false],["2025-10-07",3.787,15.108,false],["2025-10-08",0.0,13.597,false],["2025-10-09",2.133,14.37,false],["2025-10-10",0.0,12.933,false],["2025-10-11",2.241,13.881,false],["2025-10-12",0.0,12.493,false],["2025-10-13",2.517,13.761,false],["2025-10-14",0.0,12.385,false],["2025-10-15",0.0,11.146,false],["2025-10-16",0.533,10.565,false],["2025-10-17",0.866,10.375,false],["2025-10-18",0.0,9.337,false],["2025-10-19",3.913,12.316,false],["2025-10-20",1.347,12.432,false],["2025-10-21",0.0,11.189,false],["2025-10-22",4.071,14.141,false],["2025-10-23",0.0,12.727,false],["2025-10-24",0.858,12.312,false],["2025-10-25",0.0,11.081,false],["2025-10-26",13.914,23.887,false],["2025-10-27",4.41,25.908,false],["2025-10-28",0.0,23.317,false],["2025-10-29",0.0,20.986,false],["2025-10-30",3.442,22.33,false],["2025-10-31",0.0,20.097,false],["2025-11-01",0.0,18.087,false],["2025-11-02",10.653,26.931,false],["2025-11-03",11.21,35.448,false],["2025-11-04",0.0,31.904,false],["2025-11-05",0.025,28.738,false],["2025-11-06",0.0,25.865,false],["2025-11-07",0.0,23.278,false],["2025-11-08",0.0,20.95,false],["2025-11-09",5.7,24.555,false],["2025-11-10",1.859,23.959,false],["2025-11-11",15.068,36.63,false],["2025-11-12",2.957,35.924,false],["2025-11-13",0.0,32.332,false],["2025-11-14",0.209,29.307,false],["2025-11-15",0.0,26.376,false],["2025-11-16",0.0,23.739,false],["2025-11-17",0.0,21.365,false],["2025-11-18",4.025,23.253,false],["2025-11-19",0.0,20.928,false],["2025-11-20",6.122,24.957,false],["2025-11-21",0.0,22.462,false],["2025-11-22",0.0,20.215,false],["2025-11-23",0.0,18.194,false],["2025-11-24",5.011,21.385,false],["2025-11-25",0.751,19.997,false],["2025-11-26",1.892,19.889,false],["2025-11-27",3.671,21.572,false],["2025-11-28",0.395,19.809,false],["2025-11-29",5.143,22.971,false],["2025-11-30",4.412,25.086,false],["2025-12-01",0.99,23.567,false],["2025-12-02",4.909,26.119,false],["2025-12-03",0.0,23.507,false],["2025-12-04",8.001,29.158,false],["2025-12-05",0.0,26.242,false],["2025-12-06",0.0,23.618,false],["2025-12-07",0.0,21.256,false],["2025-12-08",2.427,21.558,false],["2025-12-09",0.442,19.844,false],["2025-12-10",1.223,19.082,false],["2025-12-11",3.826,21.0,false],["2025-12-12",0.0,18.9,false],["2025-12-13",2.544,19.554,false],["2025-12-14",5.719,23.318,false],["2025-12-15",0.908,21.894,false],["2025-12-16",2.454,22.158,false],["2025-12-17",11.467,31.41,false],["2025-12-18",0.0,28.269,false],["2025-12-19",2.702,28.144,false],["2025-12-20",0.0,25.33,false],["2025-12-21",0.0,22.797,false],["2025-12-22",0.0,20.517,false],["2025-12-23",0.0,18.465,false],["2025-12-24",1.07,17.689,false],["2025-12-25",0.0,15.92,false],["2025-12-26",0.0,14.328,false],["2025-12-27",5.774,18.67,false],["2025-12-28",3.308,20.111,false],["2025-12-29",25.626,43.725,false],["2025-12-30",5.929,45.282,false],["2025-12-31",0.0,40.754,false],["2026-01-01",1.851,38.53,false],["2026-01-02",8.729,43.406,false],["2026-01-03",0.0,39.065,false],["2026-01-04",0.0,35.159,false],["2026-01-05",4.046,35.689,false],["2026-01-06",0.0,32.12,false],["2026-01-07",5.842,34.75,false],["2026-01-08",5.202,36.477,false],["2026-01-09",0.0,32.83,false],["2026-01-10",0.0,29.547,false],["2026-01-11",0.0,26.592,false],["2026-01-12",0.0,23.933,false],["2026-01-13",6.069,27.608,false],["2026-01-14",2.342,27.19,false],["2026-01-15",6.723,31.194,false],["2026-01-16",17.559,45.634,false],["2026-01-17",5.704,46.774,false],["2026-01-18",3.651,45.748,false],["2026-01-19",5.996,47.169,false],["2026-01-20",0.29,42.742,false],["2026-01-21",0.101,38.569,false],["2026-01-22",15.0,49.712,false],["2026-01-23",5.0,49.741,false],["2026-01-24",20.0,64.767,false],["2026-01-25",30.0,88.29,true],["2026-01-26",10.0,89.461,true],["2026-01-27",55.0,135.515,true],["2026-01-28",0.0,121.963,true],["2026-01-29",0.0,109.767,true],["2026-01-30",0.0,98.79,true],["2026-01-31",6.336,95.248,true],["2026-02-01",0.308,86.031,true],["2026-02-02",0.0,77.428,true],["2026-02-03",0.0,69.685,true],["2026-02-04",1.537,64.254,false],["2026-02-05",0.0,57.828,false],["2026-02-06",9.531,61.576,false],["2026-02-07",0.0,55.419,false],["2026-02-08",0.0,49.877,false],["2026-02-09",6.27,51.159,false],["2026-02-10",0.0,46.043,false],["2026-02-11",0.823,42.262,false],["2026-02-12",0.0,38.036,false],["2026-02-13",9.672,43.904,false],["2026-02-14",0.0,39.513,false],["2026-02-15",0.0,35.562,false],["2026-02-16",9.924,41.93,false],["2026-02-17",3.007,40.745,false],["2026-02-18",5.236,41.906,false],["2026-02-19",0.048,37.763,false],["2026-02-20",6.079,40.065,false],["2026-02-21",0.0,36.059,false]];

    // ── CSS ──────────────────────────────────────────────────────────
    const css = document.createElement('style');
    css.textContent = `
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

    /* ── FAB button ── */
    #api-fab {
        position:absolute; bottom:36px; left:14px; z-index:1001;
        display:flex; align-items:center; gap:9px;
        background:rgba(8,12,24,0.92);
        border:1px solid rgba(255,255,255,0.1);
        border-radius:40px; padding:10px 18px 10px 13px;
        color:#e2e8f0; font:600 12px 'Inter',sans-serif;
        cursor:pointer; backdrop-filter:blur(16px);
        box-shadow:0 4px 24px rgba(0,0,0,.5);
        transition:all .22s; pointer-events:all;
        letter-spacing:0.2px;
    }
    #api-fab:hover { border-color:rgba(56,189,248,.4); color:#7dd3fc; }
    #api-fab.open  { border-color:rgba(56,189,248,.35); color:#7dd3fc; background:rgba(8,12,28,.96); }
    #api-risk-badge {
        width:9px; height:9px; border-radius:50%;
        background:#22c55e; flex-shrink:0;
        box-shadow:0 0 8px currentColor;
        transition:background .4s;
    }

    /* ── Slide-up panel ── */
    #api-panel {
        position:absolute; bottom:0; left:0; right:0; z-index:1000;
        pointer-events:none; opacity:0;
        transform:translateY(20px);
        transition:opacity .28s ease, transform .3s cubic-bezier(.23,1,.32,1);
    }
    #api-panel.open { pointer-events:all; opacity:1; transform:translateY(0); }

    #api-panel-inner {
        background:rgba(7,11,22,0.97);
        border-top:1px solid rgba(255,255,255,.08);
        backdrop-filter:blur(28px);
        padding:0;
        box-shadow:0 -20px 60px rgba(0,0,0,.6);
        max-height:90vh; overflow:hidden;
        display:flex; flex-direction:column;
    }

    /* ── Panel header ── */
    #api-header {
        display:flex; align-items:center; justify-content:space-between;
        padding:16px 20px 12px;
        border-bottom:1px solid rgba(255,255,255,.06);
        flex-shrink:0;
    }
    #api-header-left { display:flex; align-items:center; gap:12px; }
    #api-header-title {
        font:700 15px 'Inter',sans-serif; color:#f1f5f9;
        letter-spacing:-0.2px;
    }
    #api-header-sub {
        font:400 11px 'Inter',sans-serif;
        color:rgba(255,255,255,.3); margin-top:1px;
    }
    #api-close {
        background:rgba(255,255,255,.06); border:none; border-radius:8px;
        color:rgba(255,255,255,.4); width:28px; height:28px;
        font-size:14px; cursor:pointer; transition:all .15s;
        display:flex; align-items:center; justify-content:center;
    }
    #api-close:hover { background:rgba(255,255,255,.12); color:#fff; }

    /* ── Body scroll area ── */
    #api-body {
        overflow-y:auto; overflow-x:hidden;
        flex:1; padding:16px 20px 20px;
        display:grid; grid-template-columns:1fr 340px;
        gap:16px;
    }
    @media (max-width:900px) { #api-body { grid-template-columns:1fr; } }

    /* ── Current status card ── */
    #api-status-card {
        background:rgba(255,255,255,.03);
        border:1px solid rgba(255,255,255,.07);
        border-radius:14px; padding:16px;
        margin-bottom:14px;
        display:flex; align-items:center; gap:16px;
    }
    #api-gauge-wrap {
        position:relative; flex-shrink:0;
        width:80px; height:80px;
    }
    #api-gauge-svg { width:80px; height:80px; transform:rotate(-90deg); }
    #api-gauge-bg  { fill:none; stroke:rgba(255,255,255,.07); stroke-width:7; }
    #api-gauge-arc { fill:none; stroke:#22c55e; stroke-width:7; stroke-linecap:round;
                     stroke-dasharray:220; stroke-dashoffset:220;
                     transition:stroke-dashoffset 1.2s ease, stroke .5s; }
    #api-gauge-val {
        position:absolute; inset:0; display:flex; flex-direction:column;
        align-items:center; justify-content:center;
        font:700 18px 'JetBrains Mono',monospace; color:#f1f5f9;
        pointer-events:none;
    }
    #api-gauge-unit { font:400 9px 'JetBrains Mono',monospace; color:rgba(255,255,255,.35); letter-spacing:1px; }
    #api-status-info {}
    #api-status-val  { font:700 28px 'JetBrains Mono',monospace; color:#f1f5f9; line-height:1; }
    #api-status-label{ font:500 11px 'Inter',sans-serif; color:rgba(255,255,255,.35); margin-top:3px; }
    #api-status-risk {
        display:inline-flex; align-items:center; gap:5px;
        padding:4px 10px; border-radius:20px;
        font:600 10px 'Inter',sans-serif; letter-spacing:0.4px;
        margin-top:8px; text-transform:uppercase;
    }

    /* ── 7-day forecast cards ── */
    #api-forecast-title {
        font:600 9px 'JetBrains Mono',monospace;
        letter-spacing:1.2px; text-transform:uppercase;
        color:rgba(255,255,255,.22); margin-bottom:8px;
    }
    #api-forecast-grid {
        display:grid; grid-template-columns:repeat(7,1fr); gap:5px;
        margin-bottom:14px;
    }
    .api-day-card {
        background:rgba(255,255,255,.04);
        border:1px solid rgba(255,255,255,.07);
        border-radius:10px; padding:8px 6px;
        text-align:center; cursor:default;
        transition:border-color .2s;
    }
    .api-day-card:hover { border-color:rgba(255,255,255,.18); }
    .api-day-card.risk-low    { border-color:rgba(34,197,94,.3); }
    .api-day-card.risk-medium { border-color:rgba(245,158,11,.4); }
    .api-day-card.risk-high   { border-color:rgba(239,68,68,.5); }
    .api-day-name { font:600 9px 'Inter',sans-serif; color:rgba(255,255,255,.4); letter-spacing:.4px; text-transform:uppercase; }
    .api-day-rain { font:500 10px 'JetBrains Mono',monospace; color:#7dd3fc; margin:4px 0; }
    .api-day-api  { font:700 13px 'JetBrains Mono',monospace; }
    .api-day-prob {
        font:600 10px 'Inter',sans-serif;
        margin-top:4px; border-radius:4px;
        padding:2px 0;
    }

    /* ── Chart container ── */
    #api-chart-wrap {
    background:rgba(255,255,255,.02);
    border:1px solid rgba(255,255,255,.06);
    border-radius:14px; padding:14px 16px;
    position:relative; 
    height: 320px; /* 显式指定高度，解决拉伸问题 */
    margin-top: 10px;
}
    #api-chart-title {
        font:600 9px 'JetBrains Mono',monospace;
        letter-spacing:1.2px; text-transform:uppercase;
        color:rgba(255,255,255,.22); margin-bottom:10px;
    }
    #api-chart { width:100%; height:200px; }

    /* ── Right column ── */
    #api-right { display:flex; flex-direction:column; gap:12px; }

    /* ── Formula card ── */
    #api-formula-card {
        background:rgba(56,189,248,.06);
        border:1px solid rgba(56,189,248,.15);
        border-radius:12px; padding:12px 14px;
    }
    #api-formula-title {
        font:600 9px 'JetBrains Mono',monospace;
        letter-spacing:1.2px; text-transform:uppercase;
        color:rgba(56,189,248,.5); margin-bottom:8px;
    }
    #api-formula-eq {
        font:500 13px 'JetBrains Mono',monospace;
        color:#7dd3fc; margin-bottom:6px;
    }
    .api-formula-row {
        display:flex; justify-content:space-between;
        font:400 10px 'Inter',sans-serif;
        color:rgba(255,255,255,.3); margin-top:3px;
    }
    .api-formula-row span:last-child { color:rgba(255,255,255,.5); font-weight:500; }

    /* ── Legend ── */
    #api-legend {
        background:rgba(255,255,255,.03);
        border:1px solid rgba(255,255,255,.06);
        border-radius:12px; padding:12px 14px;
    }
    .api-leg-title {
        font:600 9px 'JetBrains Mono',monospace;
        letter-spacing:1.2px; text-transform:uppercase;
        color:rgba(255,255,255,.22); margin-bottom:8px;
    }
    .api-leg-row {
        display:flex; align-items:center; gap:8px; margin:6px 0;
    }
    .api-leg-dot {
        width:8px; height:8px; border-radius:50%; flex-shrink:0;
    }
    .api-leg-label { font:400 11px 'Inter',sans-serif; color:rgba(255,255,255,.4); flex:1; }
    .api-leg-range { font:500 10px 'JetBrains Mono',monospace; color:rgba(255,255,255,.3); }

    /* ── Data source status ── */
    #api-datasrc {
        background:rgba(255,255,255,.02);
        border:1px solid rgba(255,255,255,.05);
        border-radius:10px; padding:10px 12px;
    }
    .api-src-row {
        display:flex; align-items:center; gap:8px;
        font:400 10px 'Inter',sans-serif; color:rgba(255,255,255,.28);
        margin:3px 0;
    }
    .api-src-dot { width:5px; height:5px; border-radius:50%; flex-shrink:0; }
    .api-src-dot.ok   { background:#22c55e; }
    .api-src-dot.spin { background:#f59e0b; animation:apiblink 1s infinite; }
    .api-src-dot.err  { background:#ef4444; }
    @keyframes apiblink { 0%,100%{opacity:1}50%{opacity:.2} }

    /* ── Map marker pulse ── */
    @keyframes api-pulse {
        0%   { transform:scale(1); opacity:0.9; }
        50%  { transform:scale(1.45); opacity:0.4; }
        100% { transform:scale(1); opacity:0.9; }
    }
    .api-marker-pulse {
        animation:api-pulse 2.2s ease-in-out infinite;
        border-radius:50%;
    }
    .api-map-marker {
        display:flex; flex-direction:column; align-items:center; gap:2px;
        cursor:pointer;
    }
    .api-marker-inner {
        background:rgba(8,12,24,0.88);
        border:2px solid #22c55e;
        border-radius:10px; padding:4px 9px;
        font:700 12px 'JetBrains Mono',monospace;
        color:#f1f5f9; white-space:nowrap;
        box-shadow:0 4px 16px rgba(0,0,0,.5);
        transition:border-color .5s, box-shadow .5s;
        backdrop-filter:blur(8px);
    }
    .api-marker-label {
        font:600 8px 'Inter',sans-serif;
        color:rgba(255,255,255,.5); letter-spacing:.5px;
        text-transform:uppercase;
    }
    `;
    document.head.appendChild(css);

    // ── Wait for map ─────────────────────────────────────────────────
    function waitForMap(cb) {
        try { if (typeof map !== 'undefined' && map.getContainer) { cb(); return; } } catch(e){}
        setTimeout(() => waitForMap(cb), 200);
    }
    waitForMap(init);

    // ── State ─────────────────────────────────────────────────────────
    let currentAPI    = HIST_DATA[HIST_DATA.length - 1][2];
    let currentRain   = 0;
    let forecastDays  = [];   // [{date,rain,api,prob}]
    let chart         = null;
    let mapMarker     = null;
    let panelOpen     = false;
    let chartLib      = false; // Chart.js available?

    // ══════════════════════════════════════════════════════════════════
    function init() {
        buildUI();
        fetchRealtime();
        fetchForecast();
        placeMapMarker();
    }

    // ══════════════════════════════════════════════════════════════════
    // UI
    // ══════════════════════════════════════════════════════════════════
    function buildUI() {
        const C = map.getContainer();

        // FAB
        const fab = document.createElement('button');
        fab.id = 'api-fab';
        fab.innerHTML = `<div id="api-risk-badge"></div> 💧 Flood Risk · Dublin`;
        C.appendChild(fab);
        fab.addEventListener('click', togglePanel);

        // Panel
        const panel = document.createElement('div');
        panel.id = 'api-panel';
        panel.innerHTML = `
        <div id="api-panel-inner">
            <div id="api-header">
                <div id="api-header-left">
                    <div>
                        <div id="api-header-title">🌧 Dublin Flood Risk Monitor</div>
                        <div id="api-header-sub">Antecedent Precipitation Index · APIt = k·APIt-1 + Pt</div>
                    </div>
                </div>
                <button id="api-close">✕</button>
            </div>
            <div id="api-body">
                <!-- LEFT: chart + forecast -->
                <div>
                    <div id="api-status-card">
                        <div id="api-gauge-wrap">
                            <svg id="api-gauge-svg" viewBox="0 0 80 80">
                                <circle class="api-gauge-bg" cx="40" cy="40" r="35"/>
                                <circle id="api-gauge-arc" cx="40" cy="40" r="35"/>
                            </svg>
                            <div id="api-gauge-val">
                                <span id="api-gauge-num">—</span>
                                <span id="api-gauge-unit">API</span>
                            </div>
                        </div>
                        <div id="api-status-info">
                            <div id="api-status-val">—</div>
                            <div id="api-status-label">Current Soil Moisture Index</div>
                            <div id="api-status-risk">Calculating…</div>
                        </div>
                    </div>

                    <div id="api-forecast-title">7-DAY OUTLOOK</div>
                    <div id="api-forecast-grid"></div>

                    <div id="api-chart-wrap">
                        <div id="api-chart-title">HISTORICAL API · 2021 — PRESENT</div>
                        <canvas id="api-chart"></canvas>
                    </div>
                </div>

                <!-- RIGHT: info -->
                <div id="api-right">
                    <div id="api-formula-card">
                        <div id="api-formula-title">Model Parameters</div>
                        <div id="api-formula-eq">APIt = k · APIt-1 + Pt</div>
                        <div class="api-formula-row"><span>Decay coefficient k</span><span>0.9</span></div>
                        <div class="api-formula-row"><span>Flood threshold (low)</span><span>API ≥ 50</span></div>
                        <div class="api-formula-row"><span>Flood threshold (med)</span><span>API ≥ 70</span></div>
                        <div class="api-formula-row"><span>Flood threshold (high)</span><span>API ≥ 90</span></div>
                        <div class="api-formula-row"><span>Historical events (3yr)</span><span>19 floods</span></div>
                    </div>

                    <div id="api-legend">
                        <div class="api-leg-title">Risk Levels</div>
                        <div class="api-leg-row">
                            <div class="api-leg-dot" style="background:#22c55e"></div>
                            <span class="api-leg-label">Low Risk</span>
                            <span class="api-leg-range">API &lt; 50</span>
                        </div>
                        <div class="api-leg-row">
                            <div class="api-leg-dot" style="background:#f59e0b"></div>
                            <span class="api-leg-label">Watch</span>
                            <span class="api-leg-range">50 – 70</span>
                        </div>
                        <div class="api-leg-row">
                            <div class="api-leg-dot" style="background:#f97316"></div>
                            <span class="api-leg-label">Warning</span>
                            <span class="api-leg-range">70 – 90</span>
                        </div>
                        <div class="api-leg-row">
                            <div class="api-leg-dot" style="background:#ef4444"></div>
                            <span class="api-leg-label">High Alert</span>
                            <span class="api-leg-range">≥ 90</span>
                        </div>
                        <div class="api-leg-row" style="margin-top:8px;padding-top:8px;border-top:1px solid rgba(255,255,255,.06)">
                            <div class="api-leg-dot" style="background:#7c3aed;border-radius:3px"></div>
                            <span class="api-leg-label">Flooding Event</span>
                            <span class="api-leg-range">Historical</span>
                        </div>
                    </div>

                    <div id="api-datasrc">
                        <div class="api-src-row">
                            <div class="api-src-dot spin" id="src-hist"></div>
                            <span>Historical: 2021–2026 (OPW/Open-Meteo)</span>
                        </div>
                        <div class="api-src-row">
                            <div class="api-src-dot spin" id="src-rt"></div>
                            <span>Realtime: Open-Meteo API</span>
                        </div>
                        <div class="api-src-row">
                            <div class="api-src-dot spin" id="src-fc"></div>
                            <span>Forecast: Open-Meteo 7-day</span>
                        </div>
                        <div class="api-src-row" style="margin-top:6px;font-size:9px;color:rgba(255,255,255,.18)">
                            <div class="api-src-dot" style="background:transparent"></div>
                            <span id="api-last-update">Last updated: —</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>`;
        C.appendChild(panel);

        document.getElementById('api-close').addEventListener('click', togglePanel);

        // Mark historical data source as loaded
        setSrc('src-hist', 'ok');
    }

    function togglePanel() {
        panelOpen = !panelOpen;
        document.getElementById('api-panel').classList.toggle('open', panelOpen);
        document.getElementById('api-fab').classList.toggle('open', panelOpen);
        if (panelOpen && !chartLib) loadChartJS();
        else if (panelOpen && chartLib) renderChart();
    }

    // ══════════════════════════════════════════════════════════════════
    // DATA FETCHING
    // ══════════════════════════════════════════════════════════════════

    // Fetch today's actual rainfall + last 7 days for API update
    async function fetchRealtime() {
        setSrc('src-rt', 'spin');
        const url = `https://api.open-meteo.com/v1/forecast?` +
            `latitude=53.3498&longitude=-6.2603` +
            `&daily=precipitation_sum&past_days=30&forecast_days=1` +
            `&timezone=Europe%2FDublin`;
        try {
            const d = await fetch(url).then(r => r.json());
            const dates = d.daily.time;
            const rains = d.daily.precipitation_sum;

            // Find the last date in historical data
            const lastHistDate = HIST_DATA[HIST_DATA.length - 1][0];
            let api = HIST_DATA[HIST_DATA.length - 1][2];

            // Extend with any days after historical data
            const newDays = [];
            for (let i = 0; i < dates.length; i++) {
                if (dates[i] > lastHistDate) {
                    const p = rains[i] || 0;
                    api = K * api + p;
                    newDays.push([dates[i], p, Math.round(api * 100)/100, false]);
                }
            }

            currentAPI  = api;
            currentRain = rains[rains.length - 1] || 0;

            setSrc('src-rt', 'ok');
            updateStatusUI();
            updateMapMarker();

            // If chart already rendered, update it
            if (chart) renderChart(newDays);
        } catch(e) {
            setSrc('src-rt', 'err');
            console.warn('[API Flood] Realtime fetch failed:', e.message);
            updateStatusUI();
            updateMapMarker();
        }
        document.getElementById('api-last-update').textContent =
            'Last updated: ' + new Date().toLocaleString('en-IE', {timeZone:'Europe/Dublin',hour:'2-digit',minute:'2-digit',day:'numeric',month:'short'});
    }

    // Fetch 7-day forecast and calculate predicted API + probabilities
    async function fetchForecast() {
        setSrc('src-fc', 'spin');
        const url = `https://api.open-meteo.com/v1/forecast?` +
            `latitude=53.3498&longitude=-6.2603` +
            `&daily=precipitation_sum,precipitation_probability_max,weathercode` +
            `&forecast_days=7` +
            `&timezone=Europe%2FDublin`;
        try {
            const d = await fetch(url).then(r => r.json());
            const days = d.daily;
            let api = currentAPI;
            forecastDays = [];

            for (let i = 0; i < 7; i++) {
                const rain = days.precipitation_sum[i] || 0;
                api = K * api + rain;
                const prob = floodProbability(api);
                forecastDays.push({
                    date:  days.time[i],
                    rain:  rain,
                    api:   Math.round(api * 10) / 10,
                    prob:  prob,
                    code:  days.weathercode[i],
                });
            }

            setSrc('src-fc', 'ok');
            renderForecast();
            updateMapMarker(); // update with full 7-day max
        } catch(e) {
            setSrc('src-fc', 'err');
            console.warn('[API Flood] Forecast fetch failed:', e.message);
        }
    }

    // ══════════════════════════════════════════════════════════════════
    // PROBABILITY FORMULA
    // P(flood) = 1 / (1 + exp(-(API - 80) / 12))
    // ══════════════════════════════════════════════════════════════════
    function floodProbability(api) {
        return 1 / (1 + Math.exp(-(api - 80) / 12));
    }

    function riskLevel(api) {
        if (api >= API_THRESHOLD_HIGH)   return { level:'high',   label:'HIGH ALERT',  col:'#ef4444', bg:'rgba(239,68,68,.15)',  border:'rgba(239,68,68,.35)'  };
        if (api >= API_THRESHOLD_MEDIUM) return { level:'medium', label:'WARNING',     col:'#f97316', bg:'rgba(249,115,22,.12)', border:'rgba(249,115,22,.3)'  };
        if (api >= API_THRESHOLD_LOW)    return { level:'watch',  label:'WATCH',       col:'#f59e0b', bg:'rgba(245,158,11,.12)', border:'rgba(245,158,11,.28)' };
        return                                  { level:'low',    label:'LOW RISK',    col:'#22c55e', bg:'rgba(34,197,94,.1)',   border:'rgba(34,197,94,.25)'  };
    }

    function wmoToEmoji(code) {
        if (!code && code !== 0) return '🌤';
        if (code === 0) return '☀️';
        if (code <= 3)  return '⛅';
        if (code <= 48) return '🌫';
        if (code <= 67) return '🌧';
        if (code <= 77) return '❄️';
        if (code <= 82) return '🌦';
        if (code <= 99) return '⛈';
        return '🌤';
    }

    // ══════════════════════════════════════════════════════════════════
    // UPDATE STATUS UI
    // ══════════════════════════════════════════════════════════════════
    function updateStatusUI() {
        const risk = riskLevel(currentAPI);
        const pct  = Math.min(currentAPI / 135, 1);
        const circ = 2 * Math.PI * 35;  // circumference of r=35 circle ≈ 219.9

        // Gauge
        const arc = document.getElementById('api-gauge-arc');
        if (arc) {
            arc.style.strokeDashoffset = circ * (1 - pct);
            arc.style.stroke = risk.col;
        }
        const gaugeNum = document.getElementById('api-gauge-num');
        if (gaugeNum) gaugeNum.textContent = Math.round(currentAPI);

        // Text values
        const sv = document.getElementById('api-status-val');
        if (sv) sv.textContent = Math.round(currentAPI);
        const sr = document.getElementById('api-status-risk');
        if (sr) {
            sr.textContent = risk.label;
            sr.style.background = risk.bg;
            sr.style.color = risk.col;
            sr.style.border = `1px solid ${risk.border}`;
        }

        // FAB badge
        const badge = document.getElementById('api-risk-badge');
        if (badge) badge.style.background = badge.style.boxShadow = risk.col;
    }

    // ══════════════════════════════════════════════════════════════════
    // FORECAST CARDS
    // ══════════════════════════════════════════════════════════════════
    function renderForecast() {
        const grid = document.getElementById('api-forecast-grid');
        if (!grid) return;
        grid.innerHTML = '';

        forecastDays.forEach(day => {
            const risk   = riskLevel(day.api);
            const dt     = new Date(day.date);
            const dayName= dt.toLocaleDateString('en-IE', {weekday:'short'}).toUpperCase();
            const prob   = (day.prob * 100).toFixed(0);
            const card   = document.createElement('div');
            card.className = `api-day-card risk-${risk.level}`;
            card.innerHTML = `
                <div class="api-day-name">${dayName}</div>
                <div style="font-size:16px;margin:3px 0">${wmoToEmoji(day.code)}</div>
                <div class="api-day-rain">${day.rain.toFixed(1)}<span style="font-size:8px;color:rgba(255,255,255,.3)">mm</span></div>
                <div class="api-day-api" style="color:${risk.col}">${day.api}</div>
                <div class="api-day-prob" style="color:${risk.col};background:${risk.bg}">
                    ${prob}%
                </div>
            `;
            card.title = `${day.date}: API=${day.api}, Flood P=${prob}%, Rain=${day.rain.toFixed(1)}mm`;
            grid.appendChild(card);
        });

        // Also update map marker with max future risk
        updateMapMarker();
    }

    // ══════════════════════════════════════════════════════════════════
    // MAP MARKER
    // ══════════════════════════════════════════════════════════════════
    function placeMapMarker() {
        const risk = riskLevel(currentAPI);

        const icon = L.divIcon({
            className: '',
            html: `
                <div class="api-map-marker">
                    <div class="api-marker-inner" id="api-marker-box"
                         style="border-color:${risk.col};box-shadow:0 0 14px ${risk.col}44">
                        💧 API: <span id="api-marker-val">…</span>
                    </div>
                    <div class="api-marker-label">Dublin · Flood Risk</div>
                    <div class="api-marker-pulse" id="api-marker-pulse"
                         style="width:14px;height:14px;background:${risk.col};margin-top:3px"></div>
                </div>`,
            iconSize:   [140, 70],
            iconAnchor: [70, 70],
        });

        if (mapMarker) mapMarker.remove();
        mapMarker = L.marker(DUBLIN, { icon, zIndexOffset: 500 }).addTo(map);
        mapMarker.bindPopup(`
            <b style="font-family:'Inter',sans-serif">Dublin — Flood Risk</b><br>
            Click the 💧 Flood Risk button at the bottom left to open the full panel.
        `, { maxWidth: 220 });
        mapMarker.on('click', () => { if (!panelOpen) togglePanel(); });

        updateMapMarker();
    }

    function updateMapMarker() {
        // Use max API from today and 7-day forecast
        const maxFutureAPI = forecastDays.length
            ? Math.max(currentAPI, ...forecastDays.map(d => d.api))
            : currentAPI;
        const risk = riskLevel(maxFutureAPI);

        const box   = document.getElementById('api-marker-box');
        const val   = document.getElementById('api-marker-val');
        const pulse = document.getElementById('api-marker-pulse');
        const badge = document.getElementById('api-risk-badge');

        if (val)   val.textContent = Math.round(currentAPI);
        if (box)   { box.style.borderColor = risk.col; box.style.boxShadow = `0 0 14px ${risk.col}44`; }
        if (pulse) pulse.style.background = risk.col;
        if (badge) { badge.style.background = risk.col; badge.style.boxShadow = `0 0 8px ${risk.col}`; }
    }

    // ══════════════════════════════════════════════════════════════════
    // CHART  (Chart.js)
    // ══════════════════════════════════════════════════════════════════
    function loadChartJS() {
        if (window.Chart) { chartLib = true; renderChart(); return; }
        const s = document.createElement('script');
        s.src = 'https://cdn.jsdelivr.net/npm/chart.js@4.4.4/dist/chart.umd.min.js';
        s.onload = () => {
            const s2 = document.createElement('script');
            s2.src = 'https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js';
            s2.onload = () => { chartLib = true; renderChart(); };
            document.head.appendChild(s2);
        };
        document.head.appendChild(s);
    }

 function renderChart(extraDays = []) {
    if (!window.Chart || !chartLib) return;

        // Downsample historical to weekly for performance
        const histWeekly = HIST_DATA.filter((_, i) => i % 7 === 0);

        // Combine with any extra realtime days
        const combined = [...histWeekly, ...extraDays];

        const labels = combined.map(r => r[0]);
        const apiVals= combined.map(r => r[2]);
        const rainV  = combined.map(r => r[1]);

        // Flood event vertical lines annotation
        const floodDates = HIST_DATA.filter(r => r[3]).map(r => r[0]);

        // Forecast future points
        const fcLabels = forecastDays.map(d => d.date);
        const fcVals   = forecastDays.map(d => d.api);

        const cvs = document.getElementById('api-chart');
        if (chart) {
        chart.destroy();
        chart = null;
        }

        chart = new Chart(cvs, {
            data: {
                labels: [...labels, ...fcLabels],
                datasets: [
                    {
                        type: 'line',
                        label: 'API (Soil Moisture Index)',
                        data: [...apiVals, ...Array(fcLabels.length).fill(null)],
                        borderColor: '#38bdf8',
                        backgroundColor: 'rgba(56,189,248,0.08)',
                        fill: true,
                        borderWidth: 1.8,
                        pointRadius: 0,
                        tension: 0.3,
                        order: 2,
                    },
                    {
                        type: 'line',
                        label: '7-Day Forecast API',
                        data: [...Array(labels.length).fill(null), ...fcVals],
                        borderColor: '#f59e0b',
                        backgroundColor: 'rgba(245,158,11,0.1)',
                        fill: true,
                        borderWidth: 2,
                        borderDash: [5, 3],
                        pointRadius: 3,
                        pointBackgroundColor: '#f59e0b',
                        tension: 0.3,
                        order: 1,
                    },
                    {
                        type: 'bar',
                        label: 'Daily Rainfall (mm)',
                        data: [...rainV, ...fcLabels.map((_,i) => forecastDays[i]?.rain || 0)],
                        backgroundColor: 'rgba(99,179,237,0.25)',
                        borderColor: 'rgba(99,179,237,0.5)',
                        borderWidth: 0,
                        yAxisID: 'y2',
                        order: 3,
                    },
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode:'index', intersect:false },
                plugins: {
                    legend: {
                        position: 'top',
                        labels: {
                            color: 'rgba(255,255,255,0.45)',
                            font: { family:"'JetBrains Mono',monospace", size:9 },
                            boxWidth: 12, padding: 12,
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(7,11,22,0.95)',
                        borderColor: 'rgba(255,255,255,0.1)',
                        borderWidth: 1,
                        titleColor: '#7dd3fc',
                        bodyColor: 'rgba(255,255,255,0.7)',
                        titleFont: { family:"'JetBrains Mono',monospace", size:10 },
                        bodyFont:  { family:"'Inter',sans-serif", size:10 },
                        callbacks: {
                            afterBody: (items) => {
                                const lbl = items[0]?.label;
                                if (floodDates.includes(lbl)) return ['⚠️ Flooding event recorded'];
                                const fc = forecastDays.find(d => d.date === lbl);
                                if (fc) return [`Flood P: ${(fc.prob*100).toFixed(1)}%`];
                                return [];
                            }
                        }
                    },
                    annotation: { annotations: {} }  // placeholder
                },
                scales: {
                    x: {
                        type: 'time',
                        time: { unit:'month', displayFormats: { month:'MMM yy' }, tooltipFormat:'d MMM yyyy' },
                        ticks: { color:'rgba(255,255,255,0.25)', font:{size:9}, maxTicksLimit:14 },
                        grid:  { color:'rgba(255,255,255,0.04)' },
                    },
                    y: {
                        title: { display:true, text:'API', color:'rgba(255,255,255,0.25)', font:{size:9} },
                        ticks: { color:'rgba(255,255,255,0.3)', font:{family:"'JetBrains Mono',monospace",size:9} },
                        grid:  { color:'rgba(255,255,255,0.05)' },
                        // Draw threshold lines via plugin
                    },
                    y2: {
                        position: 'right',
                        title: { display:true, text:'Rain mm', color:'rgba(255,255,255,0.2)', font:{size:9} },
                        ticks: { color:'rgba(255,255,255,0.2)', font:{size:9} },
                        grid:  { display:false },
                    }
                }
            },
            plugins: [{
                // Draw flood threshold lines + flood event markers
                id: 'thresholds',
                afterDraw(chart) {
                    const { ctx, chartArea: ca, scales } = chart;
                    if (!ca) return;
                    const yScale = scales.y;

                    // Threshold lines
                    const thresholds = [
                        { v:50, col:'rgba(245,158,11,0.5)',  label:'Watch 50' },
                        { v:70, col:'rgba(249,115,22,0.55)', label:'Warning 70' },
                        { v:90, col:'rgba(239,68,68,0.6)',   label:'Alert 90' },
                    ];
                    ctx.save();
                    thresholds.forEach(t => {
                        const y = yScale.getPixelForValue(t.v);
                        if (y < ca.top || y > ca.bottom) return;
                        ctx.beginPath();
                        ctx.moveTo(ca.left, y); ctx.lineTo(ca.right, y);
                        ctx.strokeStyle = t.col;
                        ctx.lineWidth = 1;
                        ctx.setLineDash([4, 4]);
                        ctx.stroke();
                        ctx.fillStyle = t.col;
                        ctx.font = "9px 'JetBrains Mono',monospace";
                        ctx.fillText(t.label, ca.right - 56, y - 3);
                    });

                    // Flood event vertical markers
                    ctx.setLineDash([]);
                    floodDates.forEach(dateStr => {
                        const xScale = scales.x;
                        const ts = new Date(dateStr).getTime();
                        // Only draw if in visible range
                        if (ts < xScale.min || ts > xScale.max) return;
                        const x = xScale.getPixelForValue(ts);
                        ctx.beginPath();
                        ctx.moveTo(x, ca.top); ctx.lineTo(x, ca.bottom);
                        ctx.strokeStyle = 'rgba(124,58,237,0.6)';
                        ctx.lineWidth = 1.5;
                        ctx.stroke();
                    });
                    ctx.restore();
                }
            }]
        });
    }

    // ── Helpers ──────────────────────────────────────────────────────
    function setSrc(id, state) {
        const el = document.getElementById(id);
        if (el) { el.className = 'api-src-dot'; el.classList.add(state); }
    }

})();
